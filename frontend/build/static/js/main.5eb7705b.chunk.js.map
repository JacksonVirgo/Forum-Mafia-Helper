{"version":3,"sources":["css/centermodal.module.css","img/logo.png","pages/Main.js","pages/404.js","scripts/reference.js","scripts/dateUtilities.js","components/pages/Modal.jsx","components/forms/Field.jsx","components/forms/Input.jsx","components/forms/Form.jsx","components/pages/Replacement.jsx","scripts/stringUtilities.js","scripts/websockets.js","scripts/Vote.js","scripts/sorting.js","components/pages/VoteCount.jsx","network/socket.js","index.js"],"names":["module","exports","Main","auth","className","styles","centerModal","src","logo","alt","subtitle","menuoption","href","NotFoundPage","serverUrl","months","p","title","children","map","c","i","props","child","name","label","type","htmlFor","id","Form","onSubmit","submitText","this","Field","Input","value","React","Component","Replacement","onReplacement","e","author","lastPage","url","today","date","Date","currentDay","getDate","j","k","attachSuffixOf","currentMonth","getMonth","getCalendarDate","result","departing","setState","progress","state","socket","socketIOClient","on","bind","preventDefault","target","emit","Modal","readOnly","Vote","voteData","category","pronoun","number","parseInt","post","votes","vote","last","valid","isAfter","settings","totalnames","alias","voteArray","lastVote","undefined","finalVote","length","originalVote","correction","findBestMatch","bestMatch","rating","correctionWeight","corrected","isCurrent","days","isDead","dead","deadUsr","deadRoot","rootUser","userRoot","user","sortArraysBySize","array","lemgth","VoteCount","cat","toggle","onlyCountVotes","cache","startSocketConnection","setupSocketListeners","closeSocketConnection","io","connect","disconnect","processVotes","processProgress","processError","data","Object","assign","cleaned","clean","format","currentPage","notes","Math","round","gameUrl","fields","console","log","onFormSubmit","wagons","notVoting","majority","players","voteCount","getAlive","ceil","validVote","getNewest","isValid","authorIndex","indexOf","splice","push","totalVC","categoryVotes","wagonHead","deadline","aliveList","root","getRootAuthor","containsObject","votePost","cor","obj","list","Doc","exact","path","component","to","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5eb7705b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"centerModal\":\"centermodal_centerModal__2Mx-M\",\"menuoption\":\"centermodal_menuoption__jLOr8\",\"modalForm\":\"centermodal_modalForm__2Ok44\",\"modalLabel\":\"centermodal_modalLabel__UgZm8\",\"modalInput\":\"centermodal_modalInput__1_gAg\",\"modalTextarea\":\"centermodal_modalTextarea__1Hu6j\",\"modalSubmit\":\"centermodal_modalSubmit__13Ld1\",\"small\":\"centermodal_small__1SQYX\"};","export default __webpack_public_path__ + \"static/media/logo.f16fac0d.png\";","import React from 'react';\r\nimport logo from '../img/logo.png';\r\nimport styles from '../css/centermodal.module.css';\r\n\r\nfunction renderSubtitle(subtitle) {\r\n\tlet subtitleCmpt = <h2>{subtitle}</h2>;\r\n\treturn subtitle ? subtitleCmpt : null;\r\n}\r\n\r\nexport default function Main(auth) {\r\n\treturn (\r\n\t\t<div className={styles.centerModal}>\r\n\t\t\t<img src={logo} alt='Logo' />\r\n\t\t\t<h1>Mafia Engine</h1>\r\n\t\t\t{renderSubtitle('Version Beta 1.2')}\r\n\t\t\t<br />\r\n\t\t\t<div className='mainmenu'>\r\n\t\t\t\t{/* <a className={styles.menuoption} href='/rolecard'>\r\n\t\t\t\t\tRole Card\r\n\t\t\t\t</a> */}\r\n\t\t\t\t<a className={styles.menuoption} href='/replacement'>\r\n\t\t\t\t\tReplacement Form\r\n\t\t\t\t</a>\r\n\t\t\t\t<a className={styles.menuoption} href='/votecount'>\r\n\t\t\t\t\tVote Counter\r\n\t\t\t\t</a>\r\n\t\t\t\t{/* <a className={styles.menuoption} href=\"/info\">\r\n                    Information\r\n                </a>\r\n                <a className={styles.menuoption} href=\"/tools\">\r\n                    Other Links\r\n                </a> */}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport logo from '../img/logo.png';\r\n\r\nexport default function NotFoundPage() {\r\n    return (\r\n        <div className='centerModal'>\r\n            <img src={logo} alt='Logo' />\r\n            <h1>404</h1>\r\n            <h2>Page Not Found</h2>\r\n        </div>)\r\n}\r\n","export const serverUrl = \"http://mafiaengine.com\";","import { attachSuffixOf } from './stringUtilities';\r\nlet months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n\r\nexport function getCalendarDate() {\r\n    let date = new Date();\r\n    let currentDay = date.getDate();\r\n    currentDay = attachSuffixOf(currentDay);\r\n    let currentMonth = date.getMonth() + 1;\r\n    return `${currentDay} ${months[currentMonth - 1]}`;\r\n}\r\n","import React from 'react';\r\n\r\nexport default (p) => {\r\n\tconst { title, children } = p;\r\n\treturn (\r\n\t\t<div className='modalMain'>\r\n\t\t\t<h1>{title}</h1>\r\n\t\t\t{children.map((c, i) => {\r\n\t\t\t\treturn c;\r\n\t\t\t})}\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React from 'react';\r\n\r\nexport default (props) => {\r\n\tconst { child } = props;\r\n\treturn <div className='field'>{child}</div>;\r\n};\r\n","import React from 'react';\r\n\r\nexport default (props) => {\r\n\tconst { name, label, type } = props;\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<label htmlFor={name}>{label}</label>\r\n\t\t\t<input id={props.name} type={props.type} />\r\n\t\t</>\r\n\t);\r\n};\r\n","import React from 'react';\r\nimport Field from './Field.jsx';\r\nimport Input from './Input';\r\nexport default class Form extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.onSubmit = props.onSubmit;\r\n\t\tthis.children = props.children;\r\n\t\tthis.submitText = props.submitText;\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<form className='modalForm' onSubmit={this.onSubmit}>\r\n\t\t\t\t{this.children.map((c, i) => {\r\n\t\t\t\t\treturn <Field key={c.name} child={<Input name={c.name} label={c.label} type={c.type} />} />;\r\n\t\t\t\t})}\r\n\t\t\t\t<input type='submit' value={this.submitText} />\r\n\t\t\t</form>\r\n\t\t);\r\n\t}\r\n}\r\n","import React, { setState } from 'react';\r\nimport { createSocket } from '../../scripts/websockets';\r\nimport { getCalendarDate } from '../../scripts/dateUtilities';\r\nimport Modal from './Modal';\r\nimport Form from '../forms/Form';\r\nexport default class Replacement extends React.Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\tresult: '',\r\n\t\t\tprogress: '',\r\n\t\t};\r\n\t\tthis.departing = null;\r\n\t\tthis.socket = createSocket();\r\n\t\tthis.socket.on('replacement', this.onReplacement.bind(this));\r\n\t}\r\n\tonSubmit(e) {\r\n\t\te.preventDefault();\r\n\t\tconst url = e.target.url.value;\r\n\t\tthis.departing = e.target.departing.value;\r\n\t\tthis.socket.emit('replacement', { url });\r\n\t\tthis.setState({ progress: '[pending]', result: 'Pending...' });\r\n\t}\r\n\tonReplacement = (e) => {\r\n\t\tconst { author, lastPage, title, url } = e;\r\n\t\tlet today = getCalendarDate();\r\n\t\tlet result = `${today}\\n[i][url=${url}]${title}[/url][/i]\\n[b]Moderator:[/b] [user]${author}[/user][tab]3[/tab][tab]3[/tab][b]Status:[/b] ${lastPage} pages [tab]3[/tab] [b]Replacing:[/b] [user]${this.departing}[/user]`;\r\n\t\tthis.setState({ result, progress: '' });\r\n\t};\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Modal\r\n\t\t\t\ttitle='Replacement Form'\r\n\t\t\t\tchildren={[\r\n\t\t\t\t\t<Form\r\n\t\t\t\t\t\tkey='replacementForm'\r\n\t\t\t\t\t\tonSubmit={this.onSubmit.bind(this)}\r\n\t\t\t\t\t\tsubmitText='Generate'\r\n\t\t\t\t\t\tchildren={[\r\n\t\t\t\t\t\t\t{ name: 'url', label: 'Game URL', type: 'text' },\r\n\t\t\t\t\t\t\t{ name: 'departing', label: 'Departing Player', type: 'text' },\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t/>,\r\n\t\t\t\t\t<div key='result' className='modalResult'>\r\n\t\t\t\t\t\t<h3>\r\n\t\t\t\t\t\t\tResult <span>{this.state.progress}</span>\r\n\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t<textarea value={this.state.result} readOnly />\r\n\t\t\t\t\t</div>,\r\n\t\t\t\t]}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n","export function attachSuffixOf(i) {\r\n    let j = i % 10, k = i % 100;\r\n    if (j === 1 && j !== 11) return i + \"st\";\r\n    else if (j === 2 && k !== 12) return i + \"nd\";\r\n    else if (j === 3 && k !== 13) return i + \"rd\";\r\n    else return i + \"th\";\r\n}\r\n","import socketIOClient from 'socket.io-client';\r\nimport { serverUrl } from \"./reference\";\r\n\r\nexport function createSocket(commands = []) {\r\n    const socket = socketIOClient(serverUrl);\r\n    return socket;\r\n}\r\n// Create a managable abstraction over this.","import { findBestMatch } from 'string-similarity';\r\n\r\nexport default class Vote {\r\n    constructor(voteData, category) {\r\n        this.category = category;\r\n        this.author = voteData.author;\r\n        this.pronoun = voteData.pronoun;\r\n        this.number = parseInt(voteData.post.number);\r\n        this.url = voteData.post.url;\r\n        this.votes = voteData.votes;\r\n        this.vote = {\r\n            last: null,\r\n            valid: null\r\n        }\r\n    }\r\n    isAfter(vote) {\r\n        return this.number > vote.number;\r\n    }\r\n    getNewest(vote) {\r\n        if (!vote) {\r\n            return this;\r\n        } else {\r\n            return this.isAfter ? this : vote;\r\n        }\r\n    }\r\n    clean(settings) {\r\n        const totalnames = settings.totalnames, alias = settings.alias, voteArray = this.votes[this.category];\r\n        let lastVote = undefined, finalVote = undefined;\r\n        for (let i = voteArray.length; i >= 0; i -= 1) {\r\n            const originalVote = voteArray[i];\r\n            if (lastVote === undefined) lastVote = originalVote;\r\n            if (finalVote === undefined) {\r\n                if (originalVote || originalVote === null) {\r\n                    if (originalVote === null) {\r\n                        finalVote = null;\r\n                    } else {\r\n                        let correction = findBestMatch(originalVote, totalnames).bestMatch;\r\n                        if (correction.rating >= settings?.correctionWeight || 0.7) {\r\n                            let corrected = alias[correction.target];\r\n                            if (corrected) {\r\n                                finalVote = corrected;\r\n                                if (lastVote === originalVote)\r\n                                    lastVote = finalVote;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.vote.last = lastVote;\r\n        this.vote.valid = finalVote;\r\n    }\r\n    isValid(settings) {\r\n        let isCurrent = this.number > parseInt(settings.days[settings.days.length - 1]);\r\n        let isDead = false;\r\n        for (let deadUsr of settings.dead) {\r\n            let deadRoot = this.rootUser(deadUsr, settings.totalnames);\r\n            let userRoot = this.rootUser(this.author, settings.totalnames);\r\n            if (deadRoot.target === userRoot.target) {\r\n                isDead = true;\r\n            }\r\n        }\r\n        return isCurrent && !isDead;\r\n    }\r\n    rootUser(user, totalnames) {\r\n        return findBestMatch(user, totalnames).bestMatch;\r\n    }\r\n}","export function sortArraysBySize(array) {\r\n    for (let i = 1; i < array.lemgth; i++) {\r\n        for (let j = i - 1; j > -1; j--) {\r\n            let a = array[i].length,\r\n                b = array[j].length;\r\n            if (a < b) [array[j + 1], array[j]] = [array[j], array[j + 1]];\r\n        }\r\n    }\r\n    return array;\r\n}\r\n","import React from 'react';\r\nimport { connectSocket } from '../../network/socket.js';\r\nimport Vote from '../../scripts/Vote.js';\r\nimport { sortArraysBySize } from '../../scripts/sorting.js';\r\nimport { findBestMatch } from 'string-similarity';\r\nimport Form from '../forms/Form.jsx';\r\nimport Modal from './Modal';\r\n\r\nexport default class VoteCount extends React.Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\tprogress: '',\r\n\t\t\tresult: '',\r\n\t\t};\r\n\t\tthis.toggle = {\r\n\t\t\tonlyCountVotes: false,\r\n\t\t};\r\n\t\tthis.cache = {};\r\n\t\tthis.socket = null;\r\n\r\n\t\tfor (const cat in this.toggle) {\r\n\t\t\tthis.state[cat] = this.toggle[cat];\r\n\t\t}\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\tthis.startSocketConnection();\r\n\t\tthis.setupSocketListeners();\r\n\t}\r\n\tcomponentWillUnmount() {\r\n\t\tthis.closeSocketConnection();\r\n\t}\r\n\tstartSocketConnection() {\r\n\t\tthis.socket = connectSocket();\r\n\t}\r\n\tcloseSocketConnection() {\r\n\t\tthis.socket.disconnect();\r\n\t}\r\n\tsetupSocketListeners() {\r\n\t\tthis.socket.on('result', this.processVotes.bind(this));\r\n\t\tthis.socket.on('progress', this.processProgress.bind(this));\r\n\t\tthis.socket.on('error', this.processError.bind(this));\r\n\t}\r\n\tprocessVotes(data) {\r\n\t\tthis.cache = Object.assign(this.cache, data);\r\n\t\tconst cleaned = this.clean();\r\n\t\tif (cleaned) {\r\n\t\t\tconst format = this.format(cleaned);\r\n\t\t\tthis.setState({ progress: '', result: format });\r\n\t\t} else {\r\n\t\t\tthis.setState({ progress: '[ERROR]', result: 'Thread is not compatible with this tool.' });\r\n\t\t}\r\n\t}\r\n\tprocessProgress(data) {\r\n\t\tconst { currentPage, lastPage, notes } = data;\r\n\t\tif (currentPage && lastPage) {\r\n\t\t\tthis.setState({ progress: `[${Math.round((data.currentPage / data.lastPage) * 100)}%]` });\r\n\t\t}\r\n\t\tif (notes) {\r\n\t\t\tthis.setState({ result: `${notes}` });\r\n\t\t}\r\n\t}\r\n\tprocessError(data) {\r\n\t\tthis.setState({ progress: '[ERROR]', result: data.type });\r\n\t}\r\n\tonFormSubmit(e) {\r\n\t\te.preventDefault();\r\n\t\tlet gameUrl = e.target.url.value;\r\n\t\tthis.socket.emit('votecount', { url: gameUrl });\r\n\t\tthis.setState({ progress: '[0%]', result: 'Pending Result...' });\r\n\t}\r\n\tonAddField(fields) {\r\n\t\tconsole.log(fields);\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Modal\r\n\t\t\t\ttitle='Vote Counter'\r\n\t\t\t\tchildren={[\r\n\t\t\t\t\t<Form\r\n\t\t\t\t\t\tkey='votecountForm'\r\n\t\t\t\t\t\tonSubmit={this.onFormSubmit.bind(this)}\r\n\t\t\t\t\t\tsubmitText='Generate Vote Count'\r\n\t\t\t\t\t\tchildren={[\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tname: 'url',\r\n\t\t\t\t\t\t\t\tlabel: 'Game URL',\r\n\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t/>,\r\n\r\n\t\t\t\t\t<div key='result' className='modalResult'>\r\n\t\t\t\t\t\t<h3>\r\n\t\t\t\t\t\t\tResult <span>{this.state.progress}</span>\r\n\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t<textarea value={this.state.result} readOnly />\r\n\t\t\t\t\t</div>,\r\n\t\t\t\t]}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\tclean() {\r\n\t\tconst isValid = this.cache.settings.players.length >= 1;\r\n\t\tconst voteData = {\r\n\t\t\tvotes: {},\r\n\t\t\twagons: {},\r\n\t\t\tnotVoting: [],\r\n\t\t\tmajority: null,\r\n\t\t};\r\n\t\tif (isValid) {\r\n\t\t\tfor (const category in this.cache.voteCount) {\r\n\t\t\t\tif (!voteData.votes[category]) voteData.votes[category] = {};\r\n\t\t\t\tif (!voteData.wagons[category]) voteData.wagons[category] = {};\r\n\t\t\t\tlet hammerOccured = false;\r\n\t\t\t\tvoteData.notVoting = this.getAlive();\r\n\t\t\t\tvoteData.majority = Math.ceil(voteData.notVoting.length / 2);\r\n\t\t\t\tfor (const author in this.cache.voteCount[category]) {\r\n\t\t\t\t\tif (!hammerOccured) {\r\n\t\t\t\t\t\tlet voteArray = this.cache.voteCount[category][author];\r\n\t\t\t\t\t\tlet lastVote = null;\r\n\t\t\t\t\t\tlet validVote = null;\r\n\t\t\t\t\t\tfor (let i = 0; i < voteArray.length; i++) {\r\n\t\t\t\t\t\t\tlet vote = new Vote(voteArray[i], category);\r\n\t\t\t\t\t\t\tvote.clean(this.cache.settings);\r\n\t\t\t\t\t\t\tif (vote.vote.valid !== undefined) {\r\n\t\t\t\t\t\t\t\tif (vote.vote.valid) {\r\n\t\t\t\t\t\t\t\t\tvalidVote = vote.getNewest(validVote);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tvalidVote = null;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlastVote = vote.getNewest(lastVote);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tlet valid = validVote?.isValid(this.cache.settings);\r\n\t\t\t\t\t\tif (valid && !hammerOccured) {\r\n\t\t\t\t\t\t\tlet authorIndex = voteData.notVoting.indexOf(validVote.author);\r\n\t\t\t\t\t\t\tvoteData.notVoting.splice(authorIndex, 1);\r\n\t\t\t\t\t\t\tvoteData.votes[category][author] = {\r\n\t\t\t\t\t\t\t\tlast: lastVote,\r\n\t\t\t\t\t\t\t\tvalid: validVote,\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tif (!voteData.wagons[category][validVote.vote.valid]) voteData.wagons[category][validVote.vote.valid] = [];\r\n\r\n\t\t\t\t\t\t\tlet wagons = voteData.wagons[category][validVote.vote.valid];\r\n\t\t\t\t\t\t\twagons.push(validVote);\r\n\t\t\t\t\t\t\twagons = sortArraysBySize(wagons);\r\n\t\t\t\t\t\t\tvoteData.wagons[category][validVote.vote.valid] = wagons;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet returnVal = this.cache.settings.players.length;\r\n\t\treturn returnVal >= 1 ? voteData : null;\r\n\t}\r\n\tformat(voteData) {\r\n\t\tconst { wagons, notVoting, majority } = voteData;\r\n\t\tlet totalVC = '';\r\n\t\tfor (const category in wagons) {\r\n\t\t\tlet categoryVotes = '[area=VC]';\r\n\t\t\tfor (const wagonHead in wagons[category]) {\r\n\t\t\t\tlet voteArray = wagons[category][wagonHead];\r\n\t\t\t\tlet vote = `[b]${wagonHead}[/b] (${voteArray.length}) -> `;\r\n\t\t\t\tfor (let i = 0; i < voteArray.length; i++) {\r\n\t\t\t\t\tif (i > 0) vote += ', ';\r\n\t\t\t\t\tvote += `${voteArray[i].author}`;\r\n\t\t\t\t}\r\n\t\t\t\tcategoryVotes += vote + '\\n';\r\n\t\t\t}\r\n\t\t\tif (notVoting.length > 0) {\r\n\t\t\t\tcategoryVotes += `\\n[b]Not Voting[/b] (${notVoting.length}) -> `;\r\n\t\t\t\tfor (let i = 0; i < notVoting.length; i++) {\r\n\t\t\t\t\tif (i > 0) categoryVotes += ', ';\r\n\t\t\t\t\tcategoryVotes += `${notVoting[i]}`;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcategoryVotes += `${this.cache.settings.deadline ? `\\nDay ends in [countdown]${this.cache.settings.deadline}[/countdown]` : ''}[/area]`;\r\n\t\t\ttotalVC += categoryVotes;\r\n\t\t}\r\n\t\treturn totalVC;\r\n\t}\r\n\tgetAlive() {\r\n\t\tconst { players, dead } = this.cache.settings;\r\n\t\tlet aliveList = [];\r\n\t\tfor (let i = 0; i < players.length; i++) {\r\n\t\t\tlet root = this.getRootAuthor(players[i]);\r\n\t\t\tif (!containsObject(root, aliveList) && !containsObject(root, dead)) {\r\n\t\t\t\taliveList.push(root);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn aliveList;\r\n\t}\r\n\tcheckValid(votePost, category) {\r\n\t\tlet isCurrent = votePost.number > parseInt(this.cache.settings.days[this.cache.settings.days.length - 1]);\r\n\t\tlet isDead = false;\r\n\t\tfor (let deadUsr of this.cache.settings.dead) {\r\n\t\t\tlet deadRoot = this.rootUser(deadUsr);\r\n\t\t\tlet userRoot = this.rootUser(votePost.author);\r\n\t\t\tif (deadRoot.target === userRoot.target) {\r\n\t\t\t\tisDead = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn isCurrent && !isDead;\r\n\t}\r\n\tisValidVote(vote) {\r\n\t\tlet valid = false;\r\n\t\tif (vote) {\r\n\t\t\tlet cor = this.rootUser(vote);\r\n\t\t\tif (cor.rating >= this.cache.settings.correctionWeight || 0.7) {\r\n\t\t\t\tlet correctedVote = this.cache.settings.alias[cor.target];\r\n\t\t\t\tif (correctedVote) {\r\n\t\t\t\t\tvalid = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn valid;\r\n\t}\r\n\trootUser(user) {\r\n\t\treturn findBestMatch(user, this.cache.settings.totalnames).bestMatch;\r\n\t}\r\n\tgetRootAuthor(author) {\r\n\t\tlet bestMatch = findBestMatch(author, this.cache.settings.totalnames).bestMatch;\r\n\t\tlet root = this.cache.settings.alias[bestMatch.target];\r\n\t\treturn root || bestMatch.target;\r\n\t}\r\n}\r\n\r\nfunction containsObject(obj, list) {\r\n\tfor (let i = 0; i < list.length; i++) {\r\n\t\tif (list[i] === obj) return true;\r\n\t}\r\n\treturn false;\r\n}\r\n","import io from 'socket.io-client';\r\n\r\nexport function connectSocket() {\r\n    return io.connect();\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter as Router, Route, Switch, Redirect, Link } from 'react-router-dom';\r\nimport './css/main.css';\r\n\r\n// Pages\r\nimport Main from './pages/Main.js';\r\nimport NotFoundPage from './pages/404.js';\r\nimport Replacement from './components/pages/Replacement.jsx';\r\nimport VoteCount from './components/pages/VoteCount.jsx';\r\nclass Doc extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<Router>\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Route exact path='/' component={Main} />\r\n\t\t\t\t\t\t<Route exact path='/replacement' component={Replacement} />\r\n\t\t\t\t\t\t<Route exact path='/votecount' component={VoteCount} />\r\n\t\t\t\t\t\t<Route exact path='/test' component={VoteCount} />\r\n\r\n\t\t\t\t\t\t<Route path='/404' component={NotFoundPage} />\r\n\t\t\t\t\t\t<Redirect to='/404' />\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</Router>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n}\r\nReactDOM.render(<Doc />, document.getElementById('root'));\r\n"],"sourceRoot":""}