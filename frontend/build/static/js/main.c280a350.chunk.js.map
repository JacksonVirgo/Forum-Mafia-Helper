{"version":3,"sources":["img/logo.png","components/pages/Main.jsx","components/pages/404.jsx","network/network.js","scripts/websockets.js","scripts/dateUtilities.js","components/pages/Modal.jsx","components/forms/Field.jsx","components/forms/Input.jsx","components/forms/Form.jsx","components/pages/Replacement.jsx","scripts/stringUtilities.js","scripts/Vote.js","scripts/sorting.js","scripts/formatting/settingsFormatter.js","components/pages/VoteCount.jsx","network/socket.js","components/rolecard/RolecardComponent.jsx","components/rolecard/SidebarButton.jsx","config/roleCardConfig.js","components/rolecard/sections/Import.jsx","components/rolecard/sections/Template.jsx","components/pages/RoleCard.jsx","components/pages/Credits.jsx","index.js"],"names":["Main","auth","className","src","logo","alt","subtitle","href","getServerURL","url","window","location","hostname","protocol","createSocket","socket","socketIOClient","months","Modal","p","title","children","map","c","i","Field","props","child","Input","name","label","type","accept","htmlFor","this","id","React","Component","Form","onSubmit","submitText","value","Replacement","onReplacement","e","author","lastPage","today","date","Date","currentDay","getDate","j","k","attachSuffixOf","currentMonth","getMonth","getCalendarDate","result","departing","setState","progress","state","on","bind","preventDefault","target","emit","readOnly","Vote","voteData","category","pronoun","number","parseInt","post","votes","vote","last","valid","isAfter","settings","totalnames","alias","voteArray","lastVote","undefined","finalVote","length","originalVote","correction","findBestMatch","bestMatch","rating","correctionWeight","corrected","isCurrent","days","isDead","dead","deadUsr","deadRoot","rootUser","userRoot","user","sortArraysBySize","array","lemgth","selectors","players","slots","moderators","deadline","prods","countdown","pageData","edash","edashOnTop","containsSelector","sel","selRef","includes","findSelector","selector","handle","request","defaultFunc","SettingsFormat","data","reg","unvote","hurt","voteWeight","baseUrl","parseSettings","settingsData","playerRef","convertCommaDelimiter","list","obj","addNamesArray","addAlias","convertPlayerNicknames","slotRef","aliasRef","moderatorRef","deadRef","dayRef","prodList","isNaN","convertProds","edashInt","edashOnTopInt","console","log","nameArray","push","Object","assign","setting","addPlayers","split","f","cur","root","slotList","nicknames","splitData","nicks","group","indivPlayers","currentPlayer","trim","playerReference","val","prod","int","VoteCount","cat","toggle","onlyCountVotes","cache","startSocketConnection","setupSocketListeners","closeSocketConnection","io","connect","disconnect","processVotes","processProgress","processError","cleaned","clean","format","currentPage","notes","Math","round","gameUrl","fields","onFormSubmit","wagons","orderedWagons","notVoting","majority","voteCount","getAlive","ceil","validVote","getNewest","isValid","authorIndex","indexOf","splice","wagonHandle","wagon","sortWagonByPostNumber","reverse","newArray","tmp","totalVC","categoryVotes","wagonArray","wagonHead","voteStr","eDash","aliveList","getRootAuthor","containsObject","votePost","cor","RolecardComponent","SidebarButton","onclick","onClick","config","template","Import","formSubmit","Template","onChange","RoleCard","showImport","showGlobals","showTemplate","roleData","import","globals","file","files","Papa","parse","download","header","skipEmptyLines","complete","res","roles","err","toggleImport","toggleGlobal","toggleTemplate","submitImport","templateChange","roleCardConfig","App","exact","path","component","Credit","NotFoundPage","to","ReactDOM","render","document","getElementById"],"mappings":"4LAAe,G,MAAA,IAA0B,kCCQ1B,SAASA,EAAKC,GAC5B,OACC,sBAAKC,UAAU,YAAf,UACC,qBAAKC,IAAKC,EAAMC,IAAI,SACpB,+CATqBC,EAUL,mBARXA,EADY,6BAAKA,IACS,MAS/B,uBACA,sBAAKJ,UAAU,WAAf,UACC,mBAAGA,UAAU,aAAaK,KAAK,eAA/B,8BAGA,mBAAGL,UAAU,aAAaK,KAAK,aAA/B,0BAGA,mBAAGL,UAAU,aAAaK,KAAK,WAA/B,qCAnBJ,IAAwBD,ECAT,SAASN,EAAKC,GAC5B,OACC,sBAAKC,UAAU,YAAf,UACC,qBAAKC,IAAKC,EAAMC,IAAI,SACpB,2CACA,mD,yDCJUG,EAAe,WAAO,IAHRC,EAGO,EACFC,OAAOC,SAA9BC,EADyB,EACzBA,SAAUC,EADe,EACfA,SAClB,MAJe,eADWJ,EAKRG,IAJoB,cAARH,GAA+B,KAARA,EAF7B,wBAMjB,UAAsCI,EAAtC,aAAmDD,ICJpD,SAASE,IAA6B,IACtCC,EAASC,IAAeR,KAC9B,OAAOO,ECHR,IAAIE,EAAS,CAAC,UAAW,WAAY,QAAS,QAAS,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,YCC7G,SAASC,EAAMC,GAAI,IACzBC,EAAoBD,EAApBC,MAAOC,EAAaF,EAAbE,SACf,OACC,sBAAKnB,UAAU,YAAf,UACC,6BAAKkB,IACJC,EAASC,KAAI,SAACC,EAAGC,GACjB,OAAOD,QCNI,SAASE,EAAMC,GAAQ,IAC7BC,EAAUD,EAAVC,MACR,OAAO,qBAAKzB,UAAU,QAAf,SAAwByB,I,ICFXC,E,kDACpB,WAAYF,GAAQ,IAAD,8BAClB,cAAMA,IACDG,KAAOH,EAAMG,KAClB,EAAKC,MAAQJ,EAAMI,MACnB,EAAKC,KAAOL,EAAMK,KAEdL,EAAMM,SAAQ,EAAKA,OAASN,EAAMM,QANpB,E,qDASlB,OACC,qCACC,uBAAOC,QAASC,KAAKL,KAArB,SAA4BK,KAAKJ,QACjC,uBAAOK,GAAID,KAAKL,KAAME,KAAMG,KAAKH,KAAMC,OAAQE,KAAKF,QAAU,Y,GAb/BI,IAAMC,WCCpBC,E,kDACpB,WAAYZ,GAAQ,IAAD,8BAClB,cAAMA,IACDa,SAAWb,EAAMa,SACtB,EAAKlB,SAAWK,EAAML,SACtB,EAAKmB,WAAad,EAAMc,WAJN,E,qDAOlB,OACC,uBAAMtC,UAAU,YAAYqC,SAAUL,KAAKK,SAA3C,UACEL,KAAKb,SAASC,KAAI,SAACC,EAAGC,GACtB,OAAO,cAACC,EAAD,CAAoBE,MAAO,cAAC,EAAD,CAAOE,KAAMN,EAAEM,KAAMC,MAAOP,EAAEO,MAAOC,KAAMR,EAAEQ,QAA5DR,EAAEM,SAEtB,uBAAOE,KAAK,SAASU,MAAOP,KAAKM,oB,GAbHJ,IAAMC,WCEnBK,E,kDACpB,aAAe,IAAD,8BACb,gBAgBDC,cAAgB,SAACC,GAAO,IACfC,EAAiCD,EAAjCC,OAAQC,EAAyBF,EAAzBE,SAAU1B,EAAewB,EAAfxB,MAAOX,EAAQmC,EAARnC,IAC7BsC,ELtBC,WACH,IAAIC,EAAO,IAAIC,KACXC,EAAaF,EAAKG,UACtBD,EMNG,SAAwB1B,GAC3B,IAAI4B,EAAI5B,EAAI,GAAI6B,EAAI7B,EAAI,IACxB,OAAU,IAAN4B,GAAiB,KAANA,EAAiB5B,EAAI,KACrB,IAAN4B,GAAiB,KAANC,EAAiB7B,EAAI,KAC1B,IAAN4B,GAAiB,KAANC,EAAiB7B,EAAI,KAC7BA,EAAI,KNCH8B,CAAeJ,GAC5B,IAAIK,EAAeP,EAAKQ,WAAa,EACrC,MAAM,GAAN,OAAUN,EAAV,YAAwBjC,EAAOsC,EAAe,IKiBpCE,GACRC,EAAM,UAAMX,EAAN,qBAAwBtC,EAAxB,YAA+BW,EAA/B,+CAA2EyB,EAA3E,yDAAkIC,EAAlI,uDAAyL,EAAKa,UAA9L,WACV,EAAKC,SAAS,CAAEF,SAAQG,SAAU,MAnBlC,EAAKC,MAAQ,CACZJ,OAAQ,GACRG,SAAU,IAEX,EAAKF,UAAY,KACjB,EAAK5C,OAASD,IACd,EAAKC,OAAOgD,GAAG,cAAe,EAAKpB,cAAcqB,KAAnB,iBARjB,E,qDAULpB,GACRA,EAAEqB,iBACF,IAAMxD,EAAMmC,EAAEsB,OAAOzD,IAAIgC,MACzBP,KAAKyB,UAAYf,EAAEsB,OAAOP,UAAUlB,MACpCP,KAAKnB,OAAOoD,KAAK,cAAe,CAAE1D,QAClCyB,KAAK0B,SAAS,CAAEC,SAAU,YAAaH,OAAQ,iB,+BAS/C,OACC,cAACxC,EAAD,CACCE,MAAM,mBACNC,SAAU,CACT,cAAC,EAAD,CAECkB,SAAUL,KAAKK,SAASyB,KAAK9B,MAC7BM,WAAW,WACXnB,SAAU,CACT,CAAEQ,KAAM,MAAOC,MAAO,WAAYC,KAAM,QACxC,CAAEF,KAAM,YAAaC,MAAO,mBAAoBC,KAAM,UALnD,mBAQL,sBAAkB7B,UAAU,cAA5B,UACC,yCACQ,+BAAOgC,KAAK4B,MAAMD,cAE1B,0BAAUpB,MAAOP,KAAK4B,MAAMJ,OAAQU,UAAQ,MAJpC,iB,GAtC2BhC,IAAMC,W,oBEH1BgC,E,WACpB,WAAYC,EAAUC,GAAW,oBAChCrC,KAAKqC,SAAWA,EAChBrC,KAAKW,OAASyB,EAASzB,OACvBX,KAAKsC,QAAUF,EAASE,QACxBtC,KAAKuC,OAASC,SAASJ,EAASK,KAAKF,QACrCvC,KAAKzB,IAAM6D,EAASK,KAAKlE,IACzByB,KAAK0C,MAAQN,EAASM,MACtB1C,KAAK2C,KAAO,CACXC,KAAM,KACNC,MAAO,M,oDAGDF,GACP,OAAO3C,KAAKuC,OAASI,EAAKJ,S,gCAEjBI,GACT,OAAKA,EAGG3C,KAAK8C,QAAU9C,KAAO2C,EAFtB3C,O,4BAKH+C,GAML,IALA,IAAMC,EAAaD,EAASC,WAC3BC,EAAQF,EAASE,MACjBC,EAAYlD,KAAK0C,MAAM1C,KAAKqC,UACzBc,OAAWC,EACdC,OAAYD,EACJ9D,EAAI4D,EAAUI,OAAQhE,GAAK,EAAGA,GAAK,EAAG,CAC9C,IAAMiE,EAAeL,EAAU5D,GAE/B,QADiB8D,IAAbD,IAAwBA,EAAWI,QACrBH,IAAdC,IACCE,GAAiC,OAAjBA,GACnB,GAAqB,OAAjBA,EACHF,EAAY,SACN,CACN,IAAIG,EAAaC,wBAAcF,EAAcP,GAAYU,UACrDF,EAAWG,OAAX,OAAqBZ,QAArB,IAAqBA,KAAUa,iBAClC,IAAIC,EAAYZ,EAAMO,EAAWxB,QAC7B6B,IACHR,EAAYQ,EACRV,IAAaI,IAAcJ,EAAWE,KAOhDrD,KAAK2C,KAAKC,KAAOO,EACjBnD,KAAK2C,KAAKE,MAAQQ,I,8BAEXN,GACP,IADiB,EACbe,EAAY9D,KAAKuC,OAASC,SAASO,EAASgB,KAAKhB,EAASgB,KAAKT,OAAS,IACxEU,GAAS,EAFI,cAGGjB,EAASkB,MAHZ,IAGjB,2BAAmC,CAAC,IAA3BC,EAA0B,QAC9BC,EAAWnE,KAAKoE,SAASF,EAASnB,EAASC,YAC3CqB,EAAWrE,KAAKoE,SAASpE,KAAKW,OAAQoC,EAASC,YAC/CmB,EAASnC,SAAWqC,EAASrC,SAChCgC,GAAS,IAPM,8BAUjB,OAAOF,IAAcE,I,+BAEbM,EAAMtB,GACd,OAAOS,wBAAca,EAAMtB,GAAYU,c,KCnElC,SAASa,EAAiBC,GAC7B,IAAK,IAAIlF,EAAI,EAAGA,EAAIkF,EAAMC,OAAQnF,IAC9B,IAAK,IAAI4B,EAAI5B,EAAI,EAAG4B,GAAK,EAAGA,IAAK,CAG7B,GAFQsD,EAAMlF,GAAGgE,OACTkB,EAAMtD,GAAGoC,OACjB,OAAsC,CAACkB,EAAMtD,GAAIsD,EAAMtD,EAAI,IAA/CsD,EAAMtD,EAAI,GAAtB,KAA0BsD,EAAMtD,GAAhC,MAGR,OAAOsD,ECRX,IAEME,EAAY,CACjBC,QAAS,CAAC,aAAc,WACxBC,MAAO,CAAC,WAAY,QAAS,kBAAmB,gBAChD3B,MAAO,CAAC,eAAgB,YAAa,QAAS,aAC9C4B,WAAY,CAAC,gBAAiB,aAAc,kBAC5CZ,KAAM,CAAC,WAAY,OAAQ,cAC3BF,KAAM,CAAC,kBAAmB,WAAY,QACtCe,SAAU,CAAC,WAAY,SACvBC,MAAO,CAAC,YAAa,QACrBC,UAAW,CAAC,QAAS,QAAS,YAAa,aAC3CC,SAAU,CAAC,YACXrB,iBAAkB,CAAC,gCACnBsB,MAAO,CAAC,QAAS,eACjBC,WAAY,CAAC,eAEd,SAASC,EAAiBC,EAAKC,GAC9B,OAAOA,EAAOC,SAASF,GAExB,SAASG,EAAaH,GACrB,IAAK,IAAMI,KAAYf,EACtB,GAAIU,EAAiBC,EAAKX,EAAUe,IACnC,MAAO,CAAEC,OAAQD,EAAUE,QAASN,EAAKX,UAAWA,EAAUe,IAGhE,OAAO,KAGR,IAIeG,EAJK,SAAC7C,GAEpB,OADQ,IAAI8C,EAAe9C,GAClB+C,MAIJD,E,WACL,aAA8B,IAAlB9C,EAAiB,uDAAN,KAAM,oBAC5B/C,KAAK8F,KAAO,CACXnB,QAAS,GACTC,MAAO,GACP3B,MAAO,GACPD,WAAY,GACZ6B,WAAY,GACZZ,KAAM,GACNF,KAAM,CAAC,KACPrB,MAAO,CACNqD,IAAK,CACJ9F,GAAI,IACJ0C,KAAM,SACNqD,OAAQ,YAETC,KAAM,CACLhG,GAAI,IACJ0C,KAAM,SACNqD,OAAQ,WAGVf,SAAU,KACViB,WAAY,CACXH,IAAK,GAENb,MAAO,EACPC,WAAY,EACZvB,iBAAkB,IAEnB5D,KAAKmG,QAAU,GACXpD,GAAU/C,KAAKoG,cAAcrD,G,0DAEpBsD,GACb,IAAK,IAAMhB,KAAOgB,EAAc,CAC/B,IAAIZ,EAAWD,EAAaH,GACxBS,EAAOO,EAAahB,GACxB,GAAII,EACH,OAAQA,EAASC,QAChB,IAAK,UACJ,IAAMY,EAAYtG,KAAKuG,sBAAsBT,GAC7C9F,KAAK8F,KAAKnB,QAAU2B,EAAUE,KAC9BxG,KAAK8F,KAAKlB,MAAQ0B,EAAUG,IAC5BzG,KAAK0G,cAAcJ,EAAUE,MAC7BxG,KAAK2G,SAASL,EAAUG,KACxBzG,KAAK4G,uBAAuBN,EAAUE,MACtC,MACD,IAAK,QACJ,IAAMK,EAAU7G,KAAKuG,sBAAsBT,GAC3C9F,KAAK8F,KAAKlB,MAAQiC,EAAQJ,IAC1BzG,KAAK0G,cAAcG,EAAQL,MAC3BxG,KAAK2G,SAASE,EAAQJ,KACtB,MACD,IAAK,QACJ,IAAMK,EAAW9G,KAAKuG,sBAAsBT,GAC5C9F,KAAK2G,SAASG,EAASL,KACvBzG,KAAK0G,cAAcI,EAASN,MAC5B,MACD,IAAK,aACJ,IAAMO,EAAe/G,KAAKuG,sBAAsBT,GAChD9F,KAAK8F,KAAKjB,WAAakC,EAAaP,KACpC,MACD,IAAK,OACJ,IAAMQ,EAAUhH,KAAKuG,sBAAsBT,GAC3C9F,KAAK8F,KAAK7B,KAAO+C,EAAQR,KACzB,MACD,IAAK,OACJ,IAAMS,EAASjH,KAAKuG,sBAAsBT,GAC1C9F,KAAK8F,KAAK/B,KAAOkD,EAAOT,KACxB,MACD,IAAK,WACJxG,KAAK8F,KAAKhB,SAAWgB,EACrB,MACD,IAAK,YACJ,IACIoB,EADYlH,KAAKuG,sBAAsBT,GACpBU,KACvBxG,KAAK8F,KAAKf,MAAQ,GAClB,IAAK,IAAIzF,EAAI,EAAGA,EAAI,EAAGA,IACjB6H,MAAM3E,SAAS0E,EAAS5H,KACxBU,KAAK8F,KAAKf,MAAMzF,GAAK,EADSU,KAAK8F,KAAKf,MAAMzF,GAAK4H,EAAS5H,GAGlE,MACD,IAAK,WACJU,KAAK8F,KAAKb,SAAWa,EACrB,MACD,IAAK,mBACJ9F,KAAK8F,KAAKlC,iBAAmBkC,EAC7B,MACD,IAAK,QACiB9F,KAAKoH,aAAatB,GACvC,MACD,IAAK,QACJ,IAAMuB,EAAW7E,SAASsD,GACrBqB,MAAME,GACNrH,KAAK8F,KAAKZ,OAAS,EADFlF,KAAK8F,KAAKZ,MAAQmC,EAExC,MACD,IAAK,aACJ,IAAMC,EAAgB9E,SAASsD,GAC1BqB,MAAMG,GACNtH,KAAK8F,KAAKX,YAAc,EADFnF,KAAK8F,KAAKX,WAAamC,EAElD,MACD,QACCC,QAAQC,IAAI,wBAIdD,QAAQC,IAAR,0BAA+BnC,EAA/B,iC,oCAIWoC,GAAY,IAAD,gBACPA,GADO,IACxB,2BAA4B,CAAC,IAApB9H,EAAmB,QACtBK,KAAK8F,KAAK9C,WAAWuC,SAAS5F,IAAOK,KAAK8F,KAAK9C,WAAW0E,KAAK/H,IAF7C,iC,+BAKhB8G,GACRzG,KAAK8F,KAAK7C,MAAQ0E,OAAOC,OAAO5H,KAAK8F,KAAK7C,MAAOwD,K,iCAEvCf,EAAQmC,GAClB,OAAQnC,GACP,IAAK,aACJ1F,KAAK8H,WAAWD,M,iCAMRlD,GAEV,IADA,IAAIC,EAAQD,EAAQoD,MAAM,KACjBzI,EAAI,EAAGA,EAAIsF,EAAMtB,OAAQhE,IAGjC,IAFA,IACIqF,EADOC,EAAMtF,GACEyI,MAAM,KAChBC,EAAI,EAAGA,EAAIrD,EAAQrB,OAAQ0E,IAAK,CACxC,IAAIC,EAAMtD,EAAQqD,GACjBE,EAAOvD,EAAQ,GAChB3E,KAAKmI,SAASF,GAAOC,K,6CAIDpC,GAEtB,IADA,IAAMsC,EAAY,GACT9I,EAAI,EAAGA,EAAIwG,EAAKxC,OAAQhE,IAAK,CACrC,IACM+I,EADOvC,EAAKxG,GACKyI,MAAM,KAC7B,GAAIM,EAAU/E,OAAS,EAEtB,IADA,IAAIgF,EAAQD,EAAU,GAAGN,MAAM,KAAK,GAAGA,MAAM,KACpC7G,EAAI,EAAGA,EAAIoH,EAAMhF,OAAQpC,IACjCkH,EAAUE,EAAMpH,IAAMmH,EAAU,GAKnC,OADAd,QAAQC,IAAIY,GACLA,I,4CAEctC,GAIrB,IAHA,IAAMnF,EAAS,GACd4H,EAAQ,GACL1B,EAAUf,EAAKiC,MAhMH,KAiMPzI,EAAI,EAAGA,EAAIuH,EAAQvD,OAAQhE,IAEnC,IADA,IAAIkJ,EAAe3B,EAAQvH,GAAGyI,MAjMnB,KAkMF7G,EAAI,EAAGA,EAAIsH,EAAalF,OAAQpC,IAAK,CAC7C,IAAMuH,EAAgBD,EAAa,GAAGE,OAChCC,EAAkBH,EAAatH,GAAGwH,OACxC/H,EAAO+G,KAAKiB,GACZJ,EAAMI,GAAmBF,EAG3B,MAAO,CAAEjC,KAAM7F,EAAQ8F,IAAK8B,K,mCAEhBzC,GAIZ,IAHA,IAAMf,EAAQ,CAAC,EAAG,EAAG,EAAG,GAClBgD,EAAQjC,EAAKiC,MAAM,KACnBa,EAAMb,EAAMzE,OAASyB,EAAMzB,OAASyB,EAAMzB,OAASyE,EAAMzE,OACtDhE,EAAI,EAAGA,EAAIsJ,EAAKtJ,IAAK,CAC7B,IAAIuJ,EAAOd,EAAMzI,GAAGoJ,OAChBI,EAAMtG,SAASqG,GACd1B,MAAM2B,KACV/D,EAAMzF,GAAKwJ,Q,KCxMMC,E,kDACpB,aAAe,IAAD,EAYb,IAAK,IAAMC,KAZE,qBACb,gBACKpH,MAAQ,CACZD,SAAU,GACVH,OAAQ,IAET,EAAKyH,OAAS,CACbC,gBAAgB,GAEjB,EAAKC,MAAQ,GACb,EAAKtK,OAAS,KAEI,EAAKoK,OACtB,EAAKrH,MAAMoH,GAAO,EAAKC,OAAOD,GAblB,S,gEAiBbhJ,KAAKoJ,wBACLpJ,KAAKqJ,yB,6CAGLrJ,KAAKsJ,0B,8CAGLtJ,KAAKnB,OClCI0K,IAAGC,Y,8CDqCZxJ,KAAKnB,OAAO4K,e,6CAGZzJ,KAAKnB,OAAOgD,GAAG,SAAU7B,KAAK0J,aAAa5H,KAAK9B,OAChDA,KAAKnB,OAAOgD,GAAG,WAAY7B,KAAK2J,gBAAgB7H,KAAK9B,OACrDA,KAAKnB,OAAOgD,GAAG,QAAS7B,KAAK4J,aAAa9H,KAAK9B,S,mCAEnC8F,GACZA,EAAK/C,SAAWA,EAAS+C,EAAK/C,UAC9B/C,KAAKmJ,MAAQxB,OAAOC,OAAO5H,KAAKmJ,MAAOrD,GACvC,IAAM+D,EAAU7J,KAAK8J,QACrB,GAAID,EAAS,CACZ,IAAME,EAAS/J,KAAK+J,OAAOF,GAC3B7J,KAAK0B,SAAS,CAAEC,SAAU,GAAIH,OAAQuI,SAEtC/J,KAAK0B,SAAS,CAAEC,SAAU,UAAWH,OAAQ,+C,sCAG/BsE,GAAO,IACdkE,EAAiClE,EAAjCkE,YAAapJ,EAAoBkF,EAApBlF,SAAUqJ,EAAUnE,EAAVmE,MAC3BD,GAAepJ,GAClBZ,KAAK0B,SAAS,CAAEC,SAAS,IAAD,OAAMuI,KAAKC,MAAOrE,EAAKkE,YAAclE,EAAKlF,SAAY,KAAtD,QAErBqJ,GACHjK,KAAK0B,SAAS,CAAEF,OAAO,GAAD,OAAKyI,O,mCAGhBnE,GACZ9F,KAAK0B,SAAS,CAAEC,SAAU,UAAWH,OAAQsE,EAAKjG,S,mCAEtCa,GACZA,EAAEqB,iBACF,IAAIqI,EAAU1J,EAAEsB,OAAOzD,IAAIgC,MAC3BP,KAAKnB,OAAOoD,KAAK,YAAa,CAAE1D,IAAK6L,IACrCpK,KAAK0B,SAAS,CAAEC,SAAU,OAAQH,OAAQ,wB,iCAEhC6I,GACV9C,QAAQC,IAAI6C,K,+BAGZ,OACC,cAACrL,EAAD,CACCE,MAAM,eACNC,SAAU,CACT,cAAC,EAAD,CAECkB,SAAUL,KAAKsK,aAAaxI,KAAK9B,MACjCM,WAAW,sBACXnB,SAAU,CACT,CACCQ,KAAM,MACNC,MAAO,WACPC,KAAM,UAPJ,iBAYL,sBAAkB7B,UAAU,cAA5B,UACC,yCACQ,+BAAOgC,KAAK4B,MAAMD,cAE1B,0BAAUpB,MAAOP,KAAK4B,MAAMJ,OAAQU,UAAQ,MAJpC,e,8BAWZ,IACME,EAAW,CAChBM,MAAO,GACP6H,OAAQ,GACRC,cAAe,GACfC,UAAW,GACXC,SAAU,MAEX,GARgB1K,KAAKmJ,MAAMpG,SAAS4B,QAAQrB,QAAU,EASrD,IAAK,IAAMjB,KAAYrC,KAAKmJ,MAAMwB,UAAW,CACvCvI,EAASM,MAAML,KAAWD,EAASM,MAAML,GAAY,IACrDD,EAASmI,OAAOlI,KAAWD,EAASmI,OAAOlI,GAAY,IAI5D,IAAK,IAAM1B,KAFXyB,EAASqI,UAAYzK,KAAK4K,WAC1BxI,EAASsI,SAAWR,KAAKW,KAAKzI,EAASqI,UAAUnH,OAAS,GACrCtD,KAAKmJ,MAAMwB,UAAUtI,GAAW,CAKnD,IAJoB,IAAD,EACfa,EAAYlD,KAAKmJ,MAAMwB,UAAUtI,GAAU1B,GAC3CwC,EAAW,KACX2H,EAAY,KACPxL,EAAI,EAAGA,EAAI4D,EAAUI,OAAQhE,IAAK,CAC1C,IAAIqD,EAAO,IAAIR,EAAKe,EAAU5D,GAAI+C,GAClCM,EAAKmH,MAAM9J,KAAKmJ,MAAMpG,eACEK,IAApBT,EAAKA,KAAKE,QAEZiI,EADGnI,EAAKA,KAAKE,MACDF,EAAKoI,UAAUD,GAEf,MAGd3H,EAAWR,EAAKoI,UAAU5H,GAI3B,GADS,UAAG2H,SAAH,aAAG,EAAWE,QAAQhL,KAAKmJ,MAAMpG,UACb,CAC5B,IAAIkI,EAAc7I,EAASqI,UAAUS,QAAQJ,EAAUnK,QACvDyB,EAASqI,UAAUU,OAAOF,EAAa,GACvC7I,EAASM,MAAML,GAAU1B,GAAU,CAClCiC,KAAMO,EACNN,MAAOiI,GAEH1I,EAASmI,OAAOlI,GAAUyI,EAAUnI,KAAKE,SAAQT,EAASmI,OAAOlI,GAAUyI,EAAUnI,KAAKE,OAAS,IAExG,IAAI0H,EAASnI,EAASmI,OAAOlI,GAAUyI,EAAUnI,KAAKE,OACtD0H,EAAO7C,KAAKoD,GACZP,EAAShG,EAAiBgG,GAC1BnI,EAASmI,OAAOlI,GAAUyI,EAAUnI,KAAKE,OAAS0H,GAIrD,IAAK,IAAMa,KAAehJ,EAASmI,OAAOlI,GAAW,CACpD,IAAIgJ,EAAQrL,KAAKsL,sBAAsBlJ,EAASmI,OAAOlI,GAAU+I,IAC5DhJ,EAASoI,cAAcnI,KAAWD,EAASoI,cAAcnI,GAAY,IACrED,EAASoI,cAAcnI,GAAUgJ,EAAM/H,UAASlB,EAASoI,cAAcnI,GAAUgJ,EAAM/H,QAAU,IACtGlB,EAASoI,cAAcnI,GAAUgJ,EAAM/H,QAAQ8H,GAAeC,EAE/DjJ,EAASoI,cAAcnI,GAAUkJ,UACjChE,QAAQC,IAAIpF,EAASoI,eAIvB,OADgBxK,KAAKmJ,MAAMpG,SAAS4B,QAAQrB,QACxB,EAAIlB,EAAW,O,4CAEdiJ,GAGrB,IAFA,IAAIG,EAAWH,EACX/H,EAASkI,EAASlI,OACbhE,EAAI,EAAGA,EAAIgE,EAAQhE,IAC3B,IAAK,IAAI4B,EAAI,EAAGA,EAAIoC,EAAShE,EAAI,EAAG4B,IACnC,GAAIsK,EAAStK,GAAGqB,OAASiJ,EAAStK,EAAI,GAAGqB,OAAQ,CAChD,IAAIkJ,EAAMD,EAAStK,GACnBsK,EAAStK,GAAKsK,EAAStK,EAAI,GAC3BsK,EAAStK,EAAI,GAAKuK,EAKrB,OADAlE,QAAQC,IAAIgE,GACLA,I,6BAEDpJ,GAAW,IACTmI,EAA+CnI,EAA/CmI,OAAQE,EAAuCrI,EAAvCqI,UAAWD,EAA4BpI,EAA5BoI,cAAeE,EAAatI,EAAbsI,SAD1B,EAEc1K,KAAKmJ,MAAMpG,SAAjCmC,EAFQ,EAERA,MAAOC,EAFC,EAEDA,WACXuG,EAAU,GAEd,IAAK,IAAMrJ,KAAYkI,EAAQ,CAI9B,IAHA,IAAIoB,EAAgB,YAEdC,EAAapB,EAAcnI,GACxB/C,EAAI,EAAGA,EAAIsM,EAAWtI,OAAQhE,IACtC,IAAK,IAAMuM,KAAaD,EAAWtM,GAAI,CAGtC,IAFA,IAAIqD,EAAOiJ,EAAWtM,GAAGuM,GACrBC,EAAO,aAASD,EAAT,iBAA2BlJ,EAAKW,OAAhC,SACFhE,EAAI,EAAGA,EAAIqD,EAAKW,OAAQhE,IAC5BA,EAAI,IAAGwM,GAAW,MACtBA,GAAO,UAAOnJ,EAAKrD,GAAGqB,QAEvB,IAAIoL,EAAQrB,EAAW/H,EAAKW,QACVhE,GAAK6F,EAAa,GAAK4G,GAAS7G,KACnC4G,GAAWC,GAAS,EAAI,gBAAb,cAAsCA,EAAtC,MAC1BJ,GAAa,UAAOG,EAAP,MAGf,GAAIrB,EAAUnH,OAAS,EAAG,CACzBqI,GAAa,+BAA4BlB,EAAUnH,OAAtC,SACb,IAAK,IAAIhE,EAAI,EAAGA,EAAImL,EAAUnH,OAAQhE,IACjCA,EAAI,IAAGqM,GAAiB,MAC5BA,GAAa,UAAOlB,EAAUnL,IAIhCoM,GADAC,GAAa,UAAO3L,KAAKmJ,MAAMpG,SAAS+B,SAApB,mCAA2D9E,KAAKmJ,MAAMpG,SAAS+B,SAA/E,gBAAwG,GAA/G,WAGd,OAAO4G,I,iCAKP,IAHW,IAAD,EACgB1L,KAAKmJ,MAAMpG,SAA7B4B,EADE,EACFA,QAASV,EADP,EACOA,KACb+H,EAAY,GACP1M,EAAI,EAAGA,EAAIqF,EAAQrB,OAAQhE,IAAK,CACxC,IAAI4I,EAAOlI,KAAKiM,cAActH,EAAQrF,IACjC4M,EAAehE,EAAM8D,IAAeE,EAAehE,EAAMjE,IAC7D+H,EAAUtE,KAAKQ,GAGjB,OAAO8D,I,iCAEGG,EAAU9J,GACpB,IAD8B,EAC1ByB,EAAYqI,EAAS5J,OAASC,SAASxC,KAAKmJ,MAAMpG,SAASgB,KAAK/D,KAAKmJ,MAAMpG,SAASgB,KAAKT,OAAS,IAClGU,GAAS,EAFiB,cAGVhE,KAAKmJ,MAAMpG,SAASkB,MAHV,IAG9B,2BAA8C,CAAC,IAAtCC,EAAqC,QACzCC,EAAWnE,KAAKoE,SAASF,GACzBG,EAAWrE,KAAKoE,SAAS+H,EAASxL,QAClCwD,EAASnC,SAAWqC,EAASrC,SAChCgC,GAAS,IAPmB,8BAU9B,OAAOF,IAAcE,I,kCAEVrB,GACX,IAAIE,GAAQ,EACZ,GAAIF,EAAM,CACT,IAAIyJ,EAAMpM,KAAKoE,SAASzB,GACpByJ,EAAIzI,OAAU3D,KAAKmJ,MAAMpG,SAASa,iBACjB5D,KAAKmJ,MAAMpG,SAASE,MAAMmJ,EAAIpK,UAEjDa,GAAQ,GAIX,OAAOA,I,+BAECyB,GACR,OAAOb,wBAAca,EAAMtE,KAAKmJ,MAAMpG,SAASC,YAAYU,Y,oCAE9C/C,GACb,IAAI+C,EAAYD,wBAAc9C,EAAQX,KAAKmJ,MAAMpG,SAASC,YAAYU,UAEtE,OADW1D,KAAKmJ,MAAMpG,SAASE,MAAMS,EAAU1B,SAChC0B,EAAU1B,W,GA3PY9B,IAAMC,WA+P7C,SAAS+L,EAAezF,EAAKD,GAC5B,IAAK,IAAIlH,EAAI,EAAGA,EAAIkH,EAAKlD,OAAQhE,IAChC,GAAIkH,EAAKlH,KAAOmH,EAAK,OAAO,EAE7B,OAAO,EExQO4F,MALf,SAA2B7M,GAAQ,IAC1BC,EAAUD,EAAVC,MACR,OAAO,qBAAKzB,UAAW,YAAhB,SAA8ByB,KCOvB6M,MATf,SAAuB9M,GAAQ,IACtBG,EAAkBH,EAAlBG,KAAM4M,EAAY/M,EAAZ+M,QACd,OACC,qBAAKvO,UAAU,gBAAgBwO,QAASD,EAAxC,SACE5M,K,iBCFW8M,EAJA,CACdC,SAAU,wHCIUC,E,kDACpB,WAAYnN,GAAQ,IAAD,8BAClB,cAAMA,IACDoN,WAAL,OAAkBpN,QAAlB,IAAkBA,OAAlB,EAAkBA,EAAOoN,WAFP,E,qDAKlB,OAAO,cAAC,EAAD,CAAMvM,SAAUL,KAAK4M,WAAW9K,KAAK9B,MAAOM,WAAW,SAASnB,SAAU,CAAC,cAACI,EAAD,CAAkBE,MAAO,cAAC,EAAD,CAAOE,KAAK,OAAOC,MAAM,aAAaC,KAAK,UAAzD,e,GAN3DK,IAAMC,WCHrB0M,E,kDACpB,WAAYrN,GAAQ,IAAD,8BAClB,cAAMA,IACDsN,SAAWtN,EAAMsN,SACtB,EAAKJ,SAAWlN,EAAMkN,UAAY,GAHhB,E,qDAMlB,OACC,qBAAK1O,UAAU,sBAAf,SACC,uBAAMqC,SAAU,SAACK,GAAD,OAAOA,EAAEqB,kBAAzB,UACC,uBAAOhC,QAAQ,WAAf,2BACA,0BAAUJ,KAAK,WAAWmN,SAAU9M,KAAK8M,SAAzC,SACE9M,KAAK0M,WAEP,uBAAO7M,KAAK,SAASU,MAAM,gC,GAdML,IAAMC,WCSvB4M,E,kDACpB,aAAe,IAAD,8BACb,gBACKnL,MAAQ,CACZoL,YAAY,EACZC,aAAa,EACbC,cAAc,EACdC,SAAU,IAEX,EAAKtO,OAASD,IARD,E,2DAWboB,KAAK0B,SAAS,CAAE0L,QAASpN,KAAK4B,MAAMoL,e,qCAGpChN,KAAK0B,SAAS,CAAE2L,SAAUrN,KAAK4B,MAAMqL,gB,uCAGrCjN,KAAK0B,SAAS,CAAEgL,UAAW1M,KAAK4B,MAAMsL,iB,mCAE1BxM,GAAI,IAAD,OACfA,EAAEqB,iBACF,IACC,IAAIuL,EAAO5M,EAAEsB,OAAOsL,KAAKC,MAAM,GAC/BC,IAAKC,MAAMH,EAAM,CAChBI,UAAU,EACVC,QAAQ,EACRC,gBAAgB,EAChBC,SAAU,SAACC,GACV,IADkB,EACdC,EAAQ,GADM,cAECD,EAAIhI,MAFL,IAElB,gCAAWA,EAAX,QAA6BiI,EAAMrG,KAAK5B,IAFtB,8BAGlB,EAAKpE,SAAS,CAAEyL,SAAU,EAAKvL,MAAMuL,cAGtC,MAAOa,GACRzG,QAAQC,IAAI,mB,qCAGC9G,GACdV,KAAK0B,SAAS,CAAEgL,SAAUhM,EAAEsB,OAAOzB,U,+BAInC,OACC,sBAAKvC,UAAU,WAAf,UACC,sBAAKA,UAAU,UAAf,UACC,cAAC,EAAD,CAAe2B,KAAK,SAAS4M,QAASvM,KAAKiO,aAAanM,KAAK9B,QAC7D,cAAC,EAAD,CAAeL,KAAK,UAAU4M,QAASvM,KAAKkO,aAAapM,KAAK9B,QAC9D,cAAC,EAAD,CAAeL,KAAK,UAAU4M,QAASvM,KAAKmO,eAAerM,KAAK9B,WAEjE,sBAAKhC,UAAU,UAAf,UACEgC,KAAK4B,MAAMoL,YAAc,cAAC,EAAD,CAAmBvN,MAAO,cAAC,EAAD,CAAQmN,WAAY5M,KAAKoO,aAAatM,KAAK9B,UAC9FA,KAAK4B,MAAMqL,aAAe,cAAC,EAAD,CAAmBxN,MAAO,sDACpDO,KAAK4B,MAAMsL,cAAgB,cAAC,EAAD,CAAmBzN,MAAO,cAAC,EAAD,CAAUqN,SAAU9M,KAAKqO,eAAevM,KAAK9B,MAAO0M,SAAU4B,EAAe5B,uB,GArDlGvM,aCTjBK,E,uKAEnB,OAAO,cAACxB,EAAD,CAAOE,MAAM,sBAAsBC,SAAU,CAAC,+IAAD,S,GAFbe,IAAMC,WCW/C,SAASoO,IACR,OACC,mCACC,cAAC,IAAD,UACC,eAAC,IAAD,WACC,cAAC,IAAD,CAAOC,OAAK,EAACC,KAAK,IAAIC,UAAW5Q,IACjC,cAAC,IAAD,CAAO0Q,OAAK,EAACC,KAAK,eAAeC,UAAWlO,IAC5C,cAAC,IAAD,CAAOgO,OAAK,EAACC,KAAK,aAAaC,UAAW3F,IAC1C,cAAC,IAAD,CAAOyF,OAAK,EAACC,KAAK,YAAYC,UAAW3B,IACzC,cAAC,IAAD,CAAOyB,OAAK,EAACC,KAAK,WAAWC,UAAWC,IACxC,cAAC,IAAD,CAAOH,OAAK,EAACC,KAAK,QAAQC,UAAW3F,IAErC,cAAC,IAAD,CAAO0F,KAAK,OAAOC,UAAWE,IAC9B,cAAC,IAAD,CAAUC,GAAG,gBAOlBC,IAASC,OAAO,cAACR,EAAD,IAASS,SAASC,eAAe,W","file":"static/js/main.c280a350.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.f16fac0d.png\";","import React from 'react';\r\nimport logo from '../../img/logo.png';\r\n\r\nfunction renderSubtitle(subtitle) {\r\n\tlet subtitleCmpt = <h2>{subtitle}</h2>;\r\n\treturn subtitle ? subtitleCmpt : null;\r\n}\r\n\r\nexport default function Main(auth) {\r\n\treturn (\r\n\t\t<div className='modalMain'>\r\n\t\t\t<img src={logo} alt='Logo' />\r\n\t\t\t<h1>Mafia Engine</h1>\r\n\t\t\t{renderSubtitle('Version Beta 1.5')}\r\n\t\t\t<br />\r\n\t\t\t<div className='mainmenu'>\r\n\t\t\t\t<a className='menuoption' href='/replacement'>\r\n\t\t\t\t\tReplacement Form\r\n\t\t\t\t</a>\r\n\t\t\t\t<a className='menuoption' href='/votecount'>\r\n\t\t\t\t\tVote Counter\r\n\t\t\t\t</a>\r\n\t\t\t\t<a className='menuoption' href='/credits'>\r\n\t\t\t\t\tCredits / Contact\r\n\t\t\t\t</a>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport logo from '../../img/logo.png';\r\n\r\nexport default function Main(auth) {\r\n\treturn (\r\n\t\t<div className='modalMain'>\r\n\t\t\t<img src={logo} alt='Logo' />\r\n\t\t\t<h1>Error 404</h1>\r\n\t\t\t<h2>Page Not Found</h2>\r\n\t\t</div>\r\n\t);\r\n}\r\n","export const LOCAL_URL = 'http://localhost:5000';\r\nexport const isLocalURL = (url) => {\r\n\treturn url === 'localhost' || url === '127.0.0.1' || url === '';\r\n};\r\nexport const getServerURL = () => {\r\n\tconst { hostname, protocol } = window.location;\r\n\treturn isLocalURL(hostname) ? LOCAL_URL : `${protocol}//${hostname}`;\r\n};\r\n","import socketIOClient from 'socket.io-client';\r\nimport { getServerURL } from '../network/network';\r\nexport function createSocket(commands = []) {\r\n\tconst socket = socketIOClient(getServerURL());\r\n\treturn socket;\r\n}\r\n// Create a managable abstraction over this.\r\n","import { attachSuffixOf } from './stringUtilities';\r\nlet months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n\r\nexport function getCalendarDate() {\r\n    let date = new Date();\r\n    let currentDay = date.getDate();\r\n    currentDay = attachSuffixOf(currentDay);\r\n    let currentMonth = date.getMonth() + 1;\r\n    return `${currentDay} ${months[currentMonth - 1]}`;\r\n}\r\n","import React from 'react';\r\n\r\nexport default function Modal(p) {\r\n\tconst { title, children } = p;\r\n\treturn (\r\n\t\t<div className='modalMain'>\r\n\t\t\t<h1>{title}</h1>\r\n\t\t\t{children.map((c, i) => {\r\n\t\t\t\treturn c;\r\n\t\t\t})}\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\n\r\nexport default function Field(props) {\r\n\tconst { child } = props;\r\n\treturn <div className='field'>{child}</div>;\r\n}\r\n","import React from 'react';\r\n\r\nexport default class Input extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.name = props.name;\r\n\t\tthis.label = props.label;\r\n\t\tthis.type = props.type;\r\n\r\n\t\tif (props.accept) this.accept = props.accept;\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<label htmlFor={this.name}>{this.label}</label>\r\n\t\t\t\t<input id={this.name} type={this.type} accept={this.accept || ''} />\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport Field from './Field.jsx';\r\nimport Input from './Input';\r\nexport default class Form extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.onSubmit = props.onSubmit;\r\n\t\tthis.children = props.children;\r\n\t\tthis.submitText = props.submitText;\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<form className='modalForm' onSubmit={this.onSubmit}>\r\n\t\t\t\t{this.children.map((c, i) => {\r\n\t\t\t\t\treturn <Field key={c.name} child={<Input name={c.name} label={c.label} type={c.type} />} />;\r\n\t\t\t\t})}\r\n\t\t\t\t<input type='submit' value={this.submitText} />\r\n\t\t\t</form>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport { createSocket } from '../../scripts/websockets';\r\nimport { getCalendarDate } from '../../scripts/dateUtilities';\r\nimport Modal from './Modal';\r\nimport Form from '../forms/Form';\r\nexport default class Replacement extends React.Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\tresult: '',\r\n\t\t\tprogress: '',\r\n\t\t};\r\n\t\tthis.departing = null;\r\n\t\tthis.socket = createSocket();\r\n\t\tthis.socket.on('replacement', this.onReplacement.bind(this));\r\n\t}\r\n\tonSubmit(e) {\r\n\t\te.preventDefault();\r\n\t\tconst url = e.target.url.value;\r\n\t\tthis.departing = e.target.departing.value;\r\n\t\tthis.socket.emit('replacement', { url });\r\n\t\tthis.setState({ progress: '[pending]', result: 'Pending...' });\r\n\t}\r\n\tonReplacement = (e) => {\r\n\t\tconst { author, lastPage, title, url } = e;\r\n\t\tlet today = getCalendarDate();\r\n\t\tlet result = `${today}\\n[i][url=${url}]${title}[/url][/i]\\n[b]Moderator:[/b] [user]${author}[/user][tab]3[/tab][tab]3[/tab][b]Status:[/b] ${lastPage} pages [tab]3[/tab] [b]Replacing:[/b] [user]${this.departing}[/user]`;\r\n\t\tthis.setState({ result, progress: '' });\r\n\t};\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Modal\r\n\t\t\t\ttitle='Replacement Form'\r\n\t\t\t\tchildren={[\r\n\t\t\t\t\t<Form\r\n\t\t\t\t\t\tkey='replacementForm'\r\n\t\t\t\t\t\tonSubmit={this.onSubmit.bind(this)}\r\n\t\t\t\t\t\tsubmitText='Generate'\r\n\t\t\t\t\t\tchildren={[\r\n\t\t\t\t\t\t\t{ name: 'url', label: 'Game URL', type: 'text' },\r\n\t\t\t\t\t\t\t{ name: 'departing', label: 'Departing Player', type: 'text' },\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t/>,\r\n\t\t\t\t\t<div key='result' className='modalResult'>\r\n\t\t\t\t\t\t<h3>\r\n\t\t\t\t\t\t\tResult <span>{this.state.progress}</span>\r\n\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t<textarea value={this.state.result} readOnly />\r\n\t\t\t\t\t</div>,\r\n\t\t\t\t]}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n","export function attachSuffixOf(i) {\r\n    let j = i % 10, k = i % 100;\r\n    if (j === 1 && j !== 11) return i + \"st\";\r\n    else if (j === 2 && k !== 12) return i + \"nd\";\r\n    else if (j === 3 && k !== 13) return i + \"rd\";\r\n    else return i + \"th\";\r\n}\r\n","import { findBestMatch } from 'string-similarity';\r\n\r\nexport default class Vote {\r\n\tconstructor(voteData, category) {\r\n\t\tthis.category = category;\r\n\t\tthis.author = voteData.author;\r\n\t\tthis.pronoun = voteData.pronoun;\r\n\t\tthis.number = parseInt(voteData.post.number);\r\n\t\tthis.url = voteData.post.url;\r\n\t\tthis.votes = voteData.votes;\r\n\t\tthis.vote = {\r\n\t\t\tlast: null,\r\n\t\t\tvalid: null,\r\n\t\t};\r\n\t}\r\n\tisAfter(vote) {\r\n\t\treturn this.number > vote.number;\r\n\t}\r\n\tgetNewest(vote) {\r\n\t\tif (!vote) {\r\n\t\t\treturn this;\r\n\t\t} else {\r\n\t\t\treturn this.isAfter ? this : vote;\r\n\t\t}\r\n\t}\r\n\tclean(settings) {\r\n\t\tconst totalnames = settings.totalnames,\r\n\t\t\talias = settings.alias,\r\n\t\t\tvoteArray = this.votes[this.category];\r\n\t\tlet lastVote = undefined,\r\n\t\t\tfinalVote = undefined;\r\n\t\tfor (let i = voteArray.length; i >= 0; i -= 1) {\r\n\t\t\tconst originalVote = voteArray[i];\r\n\t\t\tif (lastVote === undefined) lastVote = originalVote;\r\n\t\t\tif (finalVote === undefined) {\r\n\t\t\t\tif (originalVote || originalVote === null) {\r\n\t\t\t\t\tif (originalVote === null) {\r\n\t\t\t\t\t\tfinalVote = null;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet correction = findBestMatch(originalVote, totalnames).bestMatch;\r\n\t\t\t\t\t\tif (correction.rating >= settings?.correctionWeight || 0.7) {\r\n\t\t\t\t\t\t\tlet corrected = alias[correction.target];\r\n\t\t\t\t\t\t\tif (corrected) {\r\n\t\t\t\t\t\t\t\tfinalVote = corrected;\r\n\t\t\t\t\t\t\t\tif (lastVote === originalVote) lastVote = finalVote;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.vote.last = lastVote;\r\n\t\tthis.vote.valid = finalVote;\r\n\t}\r\n\tisValid(settings) {\r\n\t\tlet isCurrent = this.number > parseInt(settings.days[settings.days.length - 1]);\r\n\t\tlet isDead = false;\r\n\t\tfor (let deadUsr of settings.dead) {\r\n\t\t\tlet deadRoot = this.rootUser(deadUsr, settings.totalnames);\r\n\t\t\tlet userRoot = this.rootUser(this.author, settings.totalnames);\r\n\t\t\tif (deadRoot.target === userRoot.target) {\r\n\t\t\t\tisDead = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn isCurrent && !isDead;\r\n\t}\r\n\trootUser(user, totalnames) {\r\n\t\treturn findBestMatch(user, totalnames).bestMatch;\r\n\t}\r\n}\r\n","export function sortArraysBySize(array) {\r\n    for (let i = 1; i < array.lemgth; i++) {\r\n        for (let j = i - 1; j > -1; j--) {\r\n            let a = array[i].length,\r\n                b = array[j].length;\r\n            if (a < b) [array[j + 1], array[j]] = [array[j], array[j + 1]];\r\n        }\r\n    }\r\n    return array;\r\n}\r\n","const seperator = ',';\r\nconst block = ':';\r\nconst selectors = {\r\n\tplayers: ['playerList', 'players'],\r\n\tslots: ['slotList', 'slots', 'replacementlist', 'replacements'],\r\n\talias: ['nicknameList', 'nicknames', 'alias', 'aliasList'],\r\n\tmoderators: ['moderatorList', 'moderators', 'moderatorNames'],\r\n\tdead: ['deadList', 'dead', 'eliminated'],\r\n\tdays: ['dayStartNumbers', 'dayStart', 'days'],\r\n\tdeadline: ['deadline', 'timer'],\r\n\tprods: ['prodTimer', 'prod'],\r\n\tcountdown: ['prods', 'timer', 'prodTimer', 'countdown'],\r\n\tpageData: ['pageData'],\r\n\tcorrectionWeight: ['correctionWeight, correction'],\r\n\tedash: ['edash', 'edashweight'],\r\n\tedashOnTop: ['edashOnTop'],\r\n};\r\nfunction containsSelector(sel, selRef) {\r\n\treturn selRef.includes(sel);\r\n}\r\nfunction findSelector(sel) {\r\n\tfor (const selector in selectors) {\r\n\t\tif (containsSelector(sel, selectors[selector])) {\r\n\t\t\treturn { handle: selector, request: sel, selectors: selectors[selector] };\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nconst defaultFunc = (settings) => {\r\n\tlet s = new SettingsFormat(settings);\r\n\treturn s.data;\r\n};\r\nexport default defaultFunc;\r\n\r\nclass SettingsFormat {\r\n\tconstructor(settings = null) {\r\n\t\tthis.data = {\r\n\t\t\tplayers: [],\r\n\t\t\tslots: {},\r\n\t\t\talias: {},\r\n\t\t\ttotalnames: [],\r\n\t\t\tmoderators: [],\r\n\t\t\tdead: [],\r\n\t\t\tdays: ['0'],\r\n\t\t\tvotes: {\r\n\t\t\t\treg: {\r\n\t\t\t\t\tid: '0',\r\n\t\t\t\t\tvote: 'VOTE: ',\r\n\t\t\t\t\tunvote: 'UNVOTE: ',\r\n\t\t\t\t},\r\n\t\t\t\thurt: {\r\n\t\t\t\t\tid: '1',\r\n\t\t\t\t\tvote: 'HURT: ',\r\n\t\t\t\t\tunvote: 'HEAL: ',\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tpageData: null,\r\n\t\t\tvoteWeight: {\r\n\t\t\t\treg: 1,\r\n\t\t\t},\r\n\t\t\tedash: 2,\r\n\t\t\tedashOnTop: 1,\r\n\t\t\tcorrectionWeight: 0.5,\r\n\t\t};\r\n\t\tthis.baseUrl = '';\r\n\t\tif (settings) this.parseSettings(settings);\r\n\t}\r\n\tparseSettings(settingsData) {\r\n\t\tfor (const sel in settingsData) {\r\n\t\t\tlet selector = findSelector(sel);\r\n\t\t\tlet data = settingsData[sel];\r\n\t\t\tif (selector) {\r\n\t\t\t\tswitch (selector.handle) {\r\n\t\t\t\t\tcase 'players':\r\n\t\t\t\t\t\tconst playerRef = this.convertCommaDelimiter(data);\r\n\t\t\t\t\t\tthis.data.players = playerRef.list;\r\n\t\t\t\t\t\tthis.data.slots = playerRef.obj;\r\n\t\t\t\t\t\tthis.addNamesArray(playerRef.list);\r\n\t\t\t\t\t\tthis.addAlias(playerRef.obj);\r\n\t\t\t\t\t\tthis.convertPlayerNicknames(playerRef.list);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'slots':\r\n\t\t\t\t\t\tconst slotRef = this.convertCommaDelimiter(data);\r\n\t\t\t\t\t\tthis.data.slots = slotRef.obj;\r\n\t\t\t\t\t\tthis.addNamesArray(slotRef.list);\r\n\t\t\t\t\t\tthis.addAlias(slotRef.obj);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'alias':\r\n\t\t\t\t\t\tconst aliasRef = this.convertCommaDelimiter(data);\r\n\t\t\t\t\t\tthis.addAlias(aliasRef.obj);\r\n\t\t\t\t\t\tthis.addNamesArray(aliasRef.list);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'moderators':\r\n\t\t\t\t\t\tconst moderatorRef = this.convertCommaDelimiter(data);\r\n\t\t\t\t\t\tthis.data.moderators = moderatorRef.list;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'dead':\r\n\t\t\t\t\t\tconst deadRef = this.convertCommaDelimiter(data);\r\n\t\t\t\t\t\tthis.data.dead = deadRef.list;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'days':\r\n\t\t\t\t\t\tconst dayRef = this.convertCommaDelimiter(data);\r\n\t\t\t\t\t\tthis.data.days = dayRef.list;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'deadline':\r\n\t\t\t\t\t\tthis.data.deadline = data;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'countdown':\r\n\t\t\t\t\t\tconst prodRef = this.convertCommaDelimiter(data);\r\n\t\t\t\t\t\tlet prodList = prodRef.list;\r\n\t\t\t\t\t\tthis.data.prods = [];\r\n\t\t\t\t\t\tfor (let i = 0; i < 4; i++) {\r\n\t\t\t\t\t\t\tif (!isNaN(parseInt(prodList[i]))) this.data.prods[i] = prodList[i];\r\n\t\t\t\t\t\t\telse this.data.prods[i] = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'pageData':\r\n\t\t\t\t\t\tthis.data.pageData = data;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'correctionWeight':\r\n\t\t\t\t\t\tthis.data.correctionWeight = data;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'prods':\r\n\t\t\t\t\t\tconst prodTimerRef = this.convertProds(data);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'edash':\r\n\t\t\t\t\t\tconst edashInt = parseInt(data);\r\n\t\t\t\t\t\tif (!isNaN(edashInt)) this.data.edash = edashInt;\r\n\t\t\t\t\t\telse this.data.edash = -1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'edashOnTop':\r\n\t\t\t\t\t\tconst edashOnTopInt = parseInt(data);\r\n\t\t\t\t\t\tif (!isNaN(edashOnTopInt)) this.data.edashOnTop = edashOnTopInt;\r\n\t\t\t\t\t\telse this.data.edashOnTop = -1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tconsole.log('Unknown Setting');\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(`Settings found [${sel}] as an unknown selector.`);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\taddNamesArray(nameArray) {\r\n\t\tfor (let name of nameArray) {\r\n\t\t\tif (!this.data.totalnames.includes(name)) this.data.totalnames.push(name);\r\n\t\t}\r\n\t}\r\n\taddAlias(obj) {\r\n\t\tthis.data.alias = Object.assign(this.data.alias, obj);\r\n\t}\r\n\taddSetting(handle, setting) {\r\n\t\tswitch (handle) {\r\n\t\t\tcase 'playerList':\r\n\t\t\t\tthis.addPlayers(setting);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\taddPlayers(players) {\r\n\t\tlet slots = players.split(',');\r\n\t\tfor (let i = 0; i < slots.length; i++) {\r\n\t\t\tlet slot = slots[i];\r\n\t\t\tlet players = slot.split(':');\r\n\t\t\tfor (let f = 1; f < players.length; f++) {\r\n\t\t\t\tlet cur = players[f],\r\n\t\t\t\t\troot = players[0];\r\n\t\t\t\tthis.slotList[cur] = root;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tconvertPlayerNicknames(data) {\r\n\t\tconst nicknames = {};\r\n\t\tfor (let i = 0; i < data.length; i++) {\r\n\t\t\tconst root = data[i];\r\n\t\t\tconst splitData = root.split('{');\r\n\t\t\tif (splitData.length > 1) {\r\n\t\t\t\tlet nicks = splitData[1].split('}')[0].split('+');\r\n\t\t\t\tfor (let j = 0; j < nicks.length; j++) {\r\n\t\t\t\t\tnicknames[nicks[j]] = splitData[0];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tconsole.log(nicknames);\r\n\t\treturn nicknames;\r\n\t}\r\n\tconvertCommaDelimiter(data) {\r\n\t\tconst author = [],\r\n\t\t\tgroup = {};\r\n\t\tlet slotRef = data.split(seperator);\r\n\t\tfor (let i = 0; i < slotRef.length; i++) {\r\n\t\t\tlet indivPlayers = slotRef[i].split(block);\r\n\t\t\tfor (let j = 0; j < indivPlayers.length; j++) {\r\n\t\t\t\tconst currentPlayer = indivPlayers[0].trim();\r\n\t\t\t\tconst playerReference = indivPlayers[j].trim();\r\n\t\t\t\tauthor.push(playerReference);\r\n\t\t\t\tgroup[playerReference] = currentPlayer;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn { list: author, obj: group };\r\n\t}\r\n\tconvertProds(data) {\r\n\t\tconst prods = [0, 0, 0, 0];\r\n\t\tconst split = data.split(',');\r\n\t\tconst val = split.length > prods.length ? prods.length : split.length;\r\n\t\tfor (let i = 0; i < val; i++) {\r\n\t\t\tlet prod = split[i].trim();\r\n\t\t\tlet int = parseInt(prod);\r\n\t\t\tif (!isNaN(int)) {\r\n\t\t\t\tprods[i] = int;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport { connectSocket } from '../../network/socket.js';\r\nimport Vote from '../../scripts/Vote.js';\r\nimport { sortArraysBySize } from '../../scripts/sorting.js';\r\nimport { findBestMatch } from 'string-similarity';\r\nimport Form from '../forms/Form.jsx';\r\nimport Modal from './Modal';\r\nimport settings from '../../scripts/formatting/settingsFormatter';\r\n\r\n/*\r\n */\r\n\r\nexport default class VoteCount extends React.Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\tprogress: '',\r\n\t\t\tresult: '',\r\n\t\t};\r\n\t\tthis.toggle = {\r\n\t\t\tonlyCountVotes: false,\r\n\t\t};\r\n\t\tthis.cache = {};\r\n\t\tthis.socket = null;\r\n\r\n\t\tfor (const cat in this.toggle) {\r\n\t\t\tthis.state[cat] = this.toggle[cat];\r\n\t\t}\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\tthis.startSocketConnection();\r\n\t\tthis.setupSocketListeners();\r\n\t}\r\n\tcomponentWillUnmount() {\r\n\t\tthis.closeSocketConnection();\r\n\t}\r\n\tstartSocketConnection() {\r\n\t\tthis.socket = connectSocket();\r\n\t}\r\n\tcloseSocketConnection() {\r\n\t\tthis.socket.disconnect();\r\n\t}\r\n\tsetupSocketListeners() {\r\n\t\tthis.socket.on('result', this.processVotes.bind(this));\r\n\t\tthis.socket.on('progress', this.processProgress.bind(this));\r\n\t\tthis.socket.on('error', this.processError.bind(this));\r\n\t}\r\n\tprocessVotes(data) {\r\n\t\tdata.settings = settings(data.settings);\r\n\t\tthis.cache = Object.assign(this.cache, data);\r\n\t\tconst cleaned = this.clean();\r\n\t\tif (cleaned) {\r\n\t\t\tconst format = this.format(cleaned);\r\n\t\t\tthis.setState({ progress: '', result: format });\r\n\t\t} else {\r\n\t\t\tthis.setState({ progress: '[ERROR]', result: 'Thread is not compatible with this tool.' });\r\n\t\t}\r\n\t}\r\n\tprocessProgress(data) {\r\n\t\tconst { currentPage, lastPage, notes } = data;\r\n\t\tif (currentPage && lastPage) {\r\n\t\t\tthis.setState({ progress: `[${Math.round((data.currentPage / data.lastPage) * 100)}%]` });\r\n\t\t}\r\n\t\tif (notes) {\r\n\t\t\tthis.setState({ result: `${notes}` });\r\n\t\t}\r\n\t}\r\n\tprocessError(data) {\r\n\t\tthis.setState({ progress: '[ERROR]', result: data.type });\r\n\t}\r\n\tonFormSubmit(e) {\r\n\t\te.preventDefault();\r\n\t\tlet gameUrl = e.target.url.value;\r\n\t\tthis.socket.emit('votecount', { url: gameUrl });\r\n\t\tthis.setState({ progress: '[0%]', result: 'Pending Result...' });\r\n\t}\r\n\tonAddField(fields) {\r\n\t\tconsole.log(fields);\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Modal\r\n\t\t\t\ttitle='Vote Counter'\r\n\t\t\t\tchildren={[\r\n\t\t\t\t\t<Form\r\n\t\t\t\t\t\tkey='votecountForm'\r\n\t\t\t\t\t\tonSubmit={this.onFormSubmit.bind(this)}\r\n\t\t\t\t\t\tsubmitText='Generate Vote Count'\r\n\t\t\t\t\t\tchildren={[\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tname: 'url',\r\n\t\t\t\t\t\t\t\tlabel: 'Game URL',\r\n\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t/>,\r\n\r\n\t\t\t\t\t<div key='result' className='modalResult'>\r\n\t\t\t\t\t\t<h3>\r\n\t\t\t\t\t\t\tResult <span>{this.state.progress}</span>\r\n\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t<textarea value={this.state.result} readOnly />\r\n\t\t\t\t\t</div>,\r\n\t\t\t\t]}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\tclean() {\r\n\t\tconst isValid = this.cache.settings.players.length >= 1;\r\n\t\tconst voteData = {\r\n\t\t\tvotes: {},\r\n\t\t\twagons: {},\r\n\t\t\torderedWagons: [],\r\n\t\t\tnotVoting: [],\r\n\t\t\tmajority: null,\r\n\t\t};\r\n\t\tif (isValid) {\r\n\t\t\tfor (const category in this.cache.voteCount) {\r\n\t\t\t\tif (!voteData.votes[category]) voteData.votes[category] = {};\r\n\t\t\t\tif (!voteData.wagons[category]) voteData.wagons[category] = {};\r\n\t\t\t\tlet hammerOccured = false;\r\n\t\t\t\tvoteData.notVoting = this.getAlive();\r\n\t\t\t\tvoteData.majority = Math.ceil(voteData.notVoting.length / 2);\r\n\t\t\t\tfor (const author in this.cache.voteCount[category]) {\r\n\t\t\t\t\tif (!hammerOccured) {\r\n\t\t\t\t\t\tlet voteArray = this.cache.voteCount[category][author];\r\n\t\t\t\t\t\tlet lastVote = null;\r\n\t\t\t\t\t\tlet validVote = null;\r\n\t\t\t\t\t\tfor (let i = 0; i < voteArray.length; i++) {\r\n\t\t\t\t\t\t\tlet vote = new Vote(voteArray[i], category);\r\n\t\t\t\t\t\t\tvote.clean(this.cache.settings);\r\n\t\t\t\t\t\t\tif (vote.vote.valid !== undefined) {\r\n\t\t\t\t\t\t\t\tif (vote.vote.valid) {\r\n\t\t\t\t\t\t\t\t\tvalidVote = vote.getNewest(validVote);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tvalidVote = null;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlastVote = vote.getNewest(lastVote);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tlet valid = validVote?.isValid(this.cache.settings);\r\n\t\t\t\t\t\tif (valid && !hammerOccured) {\r\n\t\t\t\t\t\t\tlet authorIndex = voteData.notVoting.indexOf(validVote.author);\r\n\t\t\t\t\t\t\tvoteData.notVoting.splice(authorIndex, 1);\r\n\t\t\t\t\t\t\tvoteData.votes[category][author] = {\r\n\t\t\t\t\t\t\t\tlast: lastVote,\r\n\t\t\t\t\t\t\t\tvalid: validVote,\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tif (!voteData.wagons[category][validVote.vote.valid]) voteData.wagons[category][validVote.vote.valid] = [];\r\n\r\n\t\t\t\t\t\t\tlet wagons = voteData.wagons[category][validVote.vote.valid];\r\n\t\t\t\t\t\t\twagons.push(validVote);\r\n\t\t\t\t\t\t\twagons = sortArraysBySize(wagons);\r\n\t\t\t\t\t\t\tvoteData.wagons[category][validVote.vote.valid] = wagons;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (const wagonHandle in voteData.wagons[category]) {\r\n\t\t\t\t\tlet wagon = this.sortWagonByPostNumber(voteData.wagons[category][wagonHandle]);\r\n\t\t\t\t\tif (!voteData.orderedWagons[category]) voteData.orderedWagons[category] = [];\r\n\t\t\t\t\tif (!voteData.orderedWagons[category][wagon.length]) voteData.orderedWagons[category][wagon.length] = {};\r\n\t\t\t\t\tvoteData.orderedWagons[category][wagon.length][wagonHandle] = wagon;\r\n\t\t\t\t}\r\n\t\t\t\tvoteData.orderedWagons[category].reverse();\r\n\t\t\t\tconsole.log(voteData.orderedWagons);\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet returnVal = this.cache.settings.players.length;\r\n\t\treturn returnVal >= 1 ? voteData : null;\r\n\t}\r\n\tsortWagonByPostNumber(wagon) {\r\n\t\tlet newArray = wagon;\r\n\t\tlet length = newArray.length;\r\n\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\tfor (let j = 0; j < length - i - 1; j++) {\r\n\t\t\t\tif (newArray[j].number > newArray[j + 1].number) {\r\n\t\t\t\t\tlet tmp = newArray[j];\r\n\t\t\t\t\tnewArray[j] = newArray[j + 1];\r\n\t\t\t\t\tnewArray[j + 1] = tmp;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tconsole.log(newArray);\r\n\t\treturn newArray;\r\n\t}\r\n\tformat(voteData) {\r\n\t\tconst { wagons, notVoting, orderedWagons, majority } = voteData;\r\n\t\tconst { edash, edashOnTop } = this.cache.settings;\r\n\t\tlet totalVC = '';\r\n\r\n\t\tfor (const category in wagons) {\r\n\t\t\tlet categoryVotes = '[area=VC]';\r\n\r\n\t\t\tconst wagonArray = orderedWagons[category];\r\n\t\t\tfor (let i = 0; i < wagonArray.length; i++) {\r\n\t\t\t\tfor (const wagonHead in wagonArray[i]) {\r\n\t\t\t\t\tlet vote = wagonArray[i][wagonHead];\r\n\t\t\t\t\tlet voteStr = `[b]${wagonHead}[/b] (${vote.length}) -> `;\r\n\t\t\t\t\tfor (let i = 0; i < vote.length; i++) {\r\n\t\t\t\t\t\tif (i > 0) voteStr += ', ';\r\n\t\t\t\t\t\tvoteStr += `${vote[i].author}`;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet eDash = majority - vote.length;\r\n\t\t\t\t\tconst showEdash = i <= edashOnTop - 1 || eDash <= edash;\r\n\t\t\t\t\tif (showEdash) voteStr += eDash <= 0 ? ' [ELIMINATED]' : ` [E-${eDash}]`;\r\n\t\t\t\t\tcategoryVotes += `${voteStr}\\n`;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (notVoting.length > 0) {\r\n\t\t\t\tcategoryVotes += `\\n[b]Not Voting[/b] (${notVoting.length}) -> `;\r\n\t\t\t\tfor (let i = 0; i < notVoting.length; i++) {\r\n\t\t\t\t\tif (i > 0) categoryVotes += ', ';\r\n\t\t\t\t\tcategoryVotes += `${notVoting[i]}`;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcategoryVotes += `${this.cache.settings.deadline ? `\\nDay ends in [countdown]${this.cache.settings.deadline}[/countdown]` : ''}[/area]`;\r\n\t\t\ttotalVC += categoryVotes;\r\n\t\t}\r\n\t\treturn totalVC;\r\n\t}\r\n\tgetAlive() {\r\n\t\tconst { players, dead } = this.cache.settings;\r\n\t\tlet aliveList = [];\r\n\t\tfor (let i = 0; i < players.length; i++) {\r\n\t\t\tlet root = this.getRootAuthor(players[i]);\r\n\t\t\tif (!containsObject(root, aliveList) && !containsObject(root, dead)) {\r\n\t\t\t\taliveList.push(root);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn aliveList;\r\n\t}\r\n\tcheckValid(votePost, category) {\r\n\t\tlet isCurrent = votePost.number > parseInt(this.cache.settings.days[this.cache.settings.days.length - 1]);\r\n\t\tlet isDead = false;\r\n\t\tfor (let deadUsr of this.cache.settings.dead) {\r\n\t\t\tlet deadRoot = this.rootUser(deadUsr);\r\n\t\t\tlet userRoot = this.rootUser(votePost.author);\r\n\t\t\tif (deadRoot.target === userRoot.target) {\r\n\t\t\t\tisDead = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn isCurrent && !isDead;\r\n\t}\r\n\tisValidVote(vote) {\r\n\t\tlet valid = false;\r\n\t\tif (vote) {\r\n\t\t\tlet cor = this.rootUser(vote);\r\n\t\t\tif (cor.rating >= this.cache.settings.correctionWeight || 0.7) {\r\n\t\t\t\tlet correctedVote = this.cache.settings.alias[cor.target];\r\n\t\t\t\tif (correctedVote) {\r\n\t\t\t\t\tvalid = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn valid;\r\n\t}\r\n\trootUser(user) {\r\n\t\treturn findBestMatch(user, this.cache.settings.totalnames).bestMatch;\r\n\t}\r\n\tgetRootAuthor(author) {\r\n\t\tlet bestMatch = findBestMatch(author, this.cache.settings.totalnames).bestMatch;\r\n\t\tlet root = this.cache.settings.alias[bestMatch.target];\r\n\t\treturn root || bestMatch.target;\r\n\t}\r\n}\r\n\r\nfunction containsObject(obj, list) {\r\n\tfor (let i = 0; i < list.length; i++) {\r\n\t\tif (list[i] === obj) return true;\r\n\t}\r\n\treturn false;\r\n}\r\n","import io from 'socket.io-client';\r\n\r\nexport function connectSocket() {\r\n    return io.connect();\r\n}\r\n","import React from 'react';\r\n\r\nfunction RolecardComponent(props) {\r\n\tconst { child } = props;\r\n\treturn <div className={'component'}>{child}</div>;\r\n}\r\n\r\nexport default RolecardComponent;\r\n","import React from 'react';\r\n\r\nfunction SidebarButton(props) {\r\n\tconst { name, onclick } = props;\r\n\treturn (\r\n\t\t<div className='sidebarButton' onClick={onclick}>\r\n\t\t\t{name}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default SidebarButton;\r\n","const config = {\r\n\ttemplate: '[quote][b][size=200][color={{rcolour}}]{{align}} {{rname}}[/color][/size][/b]\\n\\n{{abilities}}\\n\\n{{wincon}}[/quote]',\r\n};\r\n\r\nexport default config;\r\n","import React from 'react';\r\nimport Form from '../../forms/Form.jsx';\r\nimport Field from '../../forms/Field';\r\nimport Input from '../../forms/Input';\r\n\r\nexport default class Import extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.formSubmit = props?.formSubmit;\r\n\t}\r\n\trender() {\r\n\t\treturn <Form onSubmit={this.formSubmit.bind(this)} submitText='Import' children={[<Field key='file' child={<Input name='file' label='Upload CSV' type='file' />} />]} />;\r\n\t}\r\n}\r\n","import React from 'react';\r\n\r\nexport default class Template extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.onChange = props.onChange;\r\n\t\tthis.template = props.template || '';\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className='component modalForm'>\r\n\t\t\t\t<form onSubmit={(e) => e.preventDefault()}>\r\n\t\t\t\t\t<label htmlFor='template'>Role Template</label>\r\n\t\t\t\t\t<textarea name='template' onChange={this.onChange}>\r\n\t\t\t\t\t\t{this.template}\r\n\t\t\t\t\t</textarea>\r\n\t\t\t\t\t<input type='submit' value='Process Role Cards' />\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n","import React, { Component } from 'react';\r\nimport RolecardComponent from '../rolecard/RolecardComponent.jsx';\r\nimport SidebarButton from '../rolecard/SidebarButton.jsx';\r\nimport Papa from 'papaparse';\r\nimport { createSocket } from '../../scripts/websockets';\r\n\r\nimport roleCardConfig from '../../config/roleCardConfig';\r\n\r\nimport Import from '../rolecard/sections/Import.jsx';\r\nimport Template from '../rolecard/sections/Template.jsx';\r\n\r\nexport default class RoleCard extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\tshowImport: false,\r\n\t\t\tshowGlobals: false,\r\n\t\t\tshowTemplate: false,\r\n\t\t\troleData: [],\r\n\t\t};\r\n\t\tthis.socket = createSocket();\r\n\t}\r\n\ttoggleImport() {\r\n\t\tthis.setState({ import: !this.state.showImport });\r\n\t}\r\n\ttoggleGlobal() {\r\n\t\tthis.setState({ globals: !this.state.showGlobals });\r\n\t}\r\n\ttoggleTemplate() {\r\n\t\tthis.setState({ template: !this.state.showTemplate });\r\n\t}\r\n\tsubmitImport(e) {\r\n\t\te.preventDefault();\r\n\t\ttry {\r\n\t\t\tlet file = e.target.file.files[0];\r\n\t\t\tPapa.parse(file, {\r\n\t\t\t\tdownload: true,\r\n\t\t\t\theader: true,\r\n\t\t\t\tskipEmptyLines: true,\r\n\t\t\t\tcomplete: (res) => {\r\n\t\t\t\t\tlet roles = [];\r\n\t\t\t\t\tfor (const data of res.data) roles.push(data);\r\n\t\t\t\t\tthis.setState({ roleData: this.state.roleData });\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log('Invalid File');\r\n\t\t}\r\n\t}\r\n\ttemplateChange(e) {\r\n\t\tthis.setState({ template: e.target.value });\r\n\t}\r\n\trender() {\r\n\t\t/* Split later into different components */\r\n\t\treturn (\r\n\t\t\t<div className='rolecard'>\r\n\t\t\t\t<div className='sidebar'>\r\n\t\t\t\t\t<SidebarButton name='Import' onclick={this.toggleImport.bind(this)} />\r\n\t\t\t\t\t<SidebarButton name='Globals' onclick={this.toggleGlobal.bind(this)} />\r\n\t\t\t\t\t<SidebarButton name='Process' onclick={this.toggleTemplate.bind(this)} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='content'>\r\n\t\t\t\t\t{this.state.showImport && <RolecardComponent child={<Import formSubmit={this.submitImport.bind(this)} />} />}\r\n\t\t\t\t\t{this.state.showGlobals && <RolecardComponent child={<span>Global Component</span>} />}\r\n\t\t\t\t\t{this.state.showTemplate && <RolecardComponent child={<Template onChange={this.templateChange.bind(this)} template={roleCardConfig.template} />} />}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport Modal from './Modal';\r\nexport default class Replacement extends React.Component {\r\n\trender() {\r\n\t\treturn <Modal title='Credits and Contact' children={[<span>If you need to contact me, you can find me on Discord at NashedPotato#2919 or on MafiaScum at JacksonVirgo.</span>, ,]} />;\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter as Router, Route, Switch, Redirect } from 'react-router-dom';\r\nimport './css/main.css';\r\n\r\n// Pages\r\nimport Main from './components/pages/Main.jsx';\r\nimport NotFoundPage from './components/pages/404.jsx';\r\nimport Replacement from './components/pages/Replacement.jsx';\r\nimport VoteCount from './components/pages/VoteCount.jsx';\r\nimport RoleCard from './components/pages/RoleCard.jsx';\r\nimport Credit from './components/pages/Credits.jsx';\r\n\r\nfunction App() {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Router>\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route exact path='/' component={Main} />\r\n\t\t\t\t\t<Route exact path='/replacement' component={Replacement} />\r\n\t\t\t\t\t<Route exact path='/votecount' component={VoteCount} />\r\n\t\t\t\t\t<Route exact path='/rolecard' component={RoleCard} />\r\n\t\t\t\t\t<Route exact path='/credits' component={Credit} />\r\n\t\t\t\t\t<Route exact path='/test' component={VoteCount} />\r\n\r\n\t\t\t\t\t<Route path='/404' component={NotFoundPage} />\r\n\t\t\t\t\t<Redirect to='/404' />\r\n\t\t\t\t</Switch>\r\n\t\t\t</Router>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}