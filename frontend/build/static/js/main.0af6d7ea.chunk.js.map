{"version":3,"sources":["img/logo.png","components/pages/Main.jsx","components/pages/404.jsx","scripts/websockets.js","scripts/dateUtilities.js","components/pages/Modal.jsx","components/forms/Field.jsx","components/forms/Input.jsx","components/forms/Form.jsx","components/pages/Replacement.jsx","scripts/stringUtilities.js","scripts/Vote.js","scripts/sorting.js","scripts/formatting/settingsFormatter.js","components/pages/VoteCount.jsx","network/socket.js","components/rolecard/RolecardComponent.jsx","components/rolecard/SidebarButton.jsx","config/roleCardConfig.js","components/rolecard/sections/Import.jsx","components/rolecard/sections/Template.jsx","components/pages/RoleCard.jsx","components/pages/Credits.jsx","index.js"],"names":["Main","auth","className","src","logo","alt","subtitle","href","createSocket","socket","socketIOClient","process","SERVER_URL","months","Modal","p","title","children","map","c","i","Field","props","child","Input","name","label","type","accept","htmlFor","this","id","React","Component","Form","onSubmit","submitText","value","Replacement","onReplacement","e","author","lastPage","url","today","date","Date","currentDay","getDate","j","k","attachSuffixOf","currentMonth","getMonth","getCalendarDate","result","departing","setState","progress","state","on","bind","preventDefault","target","emit","readOnly","Vote","voteData","category","pronoun","number","parseInt","post","votes","vote","last","valid","isAfter","settings","totalnames","alias","voteArray","lastVote","undefined","finalVote","length","originalVote","correction","findBestMatch","bestMatch","rating","correctionWeight","corrected","isCurrent","days","isDead","dead","deadUsr","deadRoot","rootUser","userRoot","user","sortArraysBySize","array","lemgth","selectors","players","slots","moderators","deadline","prods","countdown","pageData","edash","edashOnTop","containsSelector","sel","selRef","includes","findSelector","selector","handle","request","defaultFunc","SettingsFormat","data","reg","unvote","hurt","voteWeight","baseUrl","parseSettings","settingsData","playerRef","convertCommaDelimiter","list","obj","addNamesArray","addAlias","convertPlayerNicknames","slotRef","aliasRef","moderatorRef","deadRef","dayRef","prodList","isNaN","convertProds","edashInt","edashOnTopInt","console","log","nameArray","push","Object","assign","setting","addPlayers","split","f","cur","root","slotList","nicknames","splitData","nicks","group","indivPlayers","currentPlayer","trim","playerReference","val","prod","int","VoteCount","cat","toggle","onlyCountVotes","cache","startSocketConnection","setupSocketListeners","closeSocketConnection","io","connect","disconnect","processVotes","processProgress","processError","cleaned","clean","format","currentPage","notes","Math","round","gameUrl","fields","onFormSubmit","wagons","orderedWagons","notVoting","majority","voteCount","getAlive","ceil","validVote","getNewest","isValid","authorIndex","indexOf","splice","wagonHandle","wagon","sortWagonByPostNumber","reverse","newArray","tmp","totalVC","categoryVotes","wagonArray","wagonHead","voteStr","eDash","aliveList","getRootAuthor","containsObject","votePost","cor","RolecardComponent","SidebarButton","onclick","onClick","config","template","Import","formSubmit","Template","onChange","RoleCard","showImport","showGlobals","showTemplate","roleData","import","globals","file","files","Papa","parse","download","header","skipEmptyLines","complete","res","roles","err","toggleImport","toggleGlobal","toggleTemplate","submitImport","templateChange","roleCardConfig","Doc","exact","path","component","Credit","NotFoundPage","to","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.0af6d7ea.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.f16fac0d.png\";","import React from 'react';\r\nimport logo from '../../img/logo.png';\r\n\r\nfunction renderSubtitle(subtitle) {\r\n\tlet subtitleCmpt = <h2>{subtitle}</h2>;\r\n\treturn subtitle ? subtitleCmpt : null;\r\n}\r\n\r\nexport default function Main(auth) {\r\n\treturn (\r\n\t\t<div className='modalMain'>\r\n\t\t\t<img src={logo} alt='Logo' />\r\n\t\t\t<h1>Mafia Engine</h1>\r\n\t\t\t{renderSubtitle('Version Beta 1.2')}\r\n\t\t\t<br />\r\n\t\t\t<div className='mainmenu'>\r\n\t\t\t\t<a className='menuoption' href='/rolecard'>\r\n\t\t\t\t\tRole Card\r\n\t\t\t\t</a>\r\n\t\t\t\t<a className='menuoption' href='/replacement'>\r\n\t\t\t\t\tReplacement Form\r\n\t\t\t\t</a>\r\n\t\t\t\t<a className='menuoption' href='/votecount'>\r\n\t\t\t\t\tVote Counter\r\n\t\t\t\t</a>\r\n\t\t\t\t<a className='menuoption' href='/credits'>\r\n\t\t\t\t\tCredits / Contact\r\n\t\t\t\t</a>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport logo from '../../img/logo.png';\r\n\r\nexport default function Main(auth) {\r\n\treturn (\r\n\t\t<div className='modalMain'>\r\n\t\t\t<img src={logo} alt='Logo' />\r\n\t\t\t<h1>Error 404</h1>\r\n\t\t\t<h2>Page Not Found</h2>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import socketIOClient from 'socket.io-client';\r\nimport { serverUrl } from './reference';\r\n\r\nexport function createSocket(commands = []) {\r\n\tconst socket = socketIOClient(process.env.SERVER_URL);\r\n\treturn socket;\r\n}\r\n// Create a managable abstraction over this.\r\n","import { attachSuffixOf } from './stringUtilities';\r\nlet months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n\r\nexport function getCalendarDate() {\r\n    let date = new Date();\r\n    let currentDay = date.getDate();\r\n    currentDay = attachSuffixOf(currentDay);\r\n    let currentMonth = date.getMonth() + 1;\r\n    return `${currentDay} ${months[currentMonth - 1]}`;\r\n}\r\n","import React from 'react';\r\n\r\nexport default function Modal(p) {\r\n\tconst { title, children } = p;\r\n\treturn (\r\n\t\t<div className='modalMain'>\r\n\t\t\t<h1>{title}</h1>\r\n\t\t\t{children.map((c, i) => {\r\n\t\t\t\treturn c;\r\n\t\t\t})}\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\n\r\nexport default function Field(props) {\r\n\tconst { child } = props;\r\n\treturn <div className='field'>{child}</div>;\r\n}\r\n","import React from 'react';\r\n\r\nexport default class Input extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.name = props.name;\r\n\t\tthis.label = props.label;\r\n\t\tthis.type = props.type;\r\n\r\n\t\tif (props.accept) this.accept = props.accept;\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<label htmlFor={this.name}>{this.label}</label>\r\n\t\t\t\t<input id={this.name} type={this.type} accept={this.accept || ''} />\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport Field from './Field.jsx';\r\nimport Input from './Input';\r\nexport default class Form extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.onSubmit = props.onSubmit;\r\n\t\tthis.children = props.children;\r\n\t\tthis.submitText = props.submitText;\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<form className='modalForm' onSubmit={this.onSubmit}>\r\n\t\t\t\t{this.children.map((c, i) => {\r\n\t\t\t\t\treturn <Field key={c.name} child={<Input name={c.name} label={c.label} type={c.type} />} />;\r\n\t\t\t\t})}\r\n\t\t\t\t<input type='submit' value={this.submitText} />\r\n\t\t\t</form>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport { createSocket } from '../../scripts/websockets';\r\nimport { getCalendarDate } from '../../scripts/dateUtilities';\r\nimport Modal from './Modal';\r\nimport Form from '../forms/Form';\r\nexport default class Replacement extends React.Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\tresult: '',\r\n\t\t\tprogress: '',\r\n\t\t};\r\n\t\tthis.departing = null;\r\n\t\tthis.socket = createSocket();\r\n\t\tthis.socket.on('replacement', this.onReplacement.bind(this));\r\n\t}\r\n\tonSubmit(e) {\r\n\t\te.preventDefault();\r\n\t\tconst url = e.target.url.value;\r\n\t\tthis.departing = e.target.departing.value;\r\n\t\tthis.socket.emit('replacement', { url });\r\n\t\tthis.setState({ progress: '[pending]', result: 'Pending...' });\r\n\t}\r\n\tonReplacement = (e) => {\r\n\t\tconst { author, lastPage, title, url } = e;\r\n\t\tlet today = getCalendarDate();\r\n\t\tlet result = `${today}\\n[i][url=${url}]${title}[/url][/i]\\n[b]Moderator:[/b] [user]${author}[/user][tab]3[/tab][tab]3[/tab][b]Status:[/b] ${lastPage} pages [tab]3[/tab] [b]Replacing:[/b] [user]${this.departing}[/user]`;\r\n\t\tthis.setState({ result, progress: '' });\r\n\t};\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Modal\r\n\t\t\t\ttitle='Replacement Form'\r\n\t\t\t\tchildren={[\r\n\t\t\t\t\t<Form\r\n\t\t\t\t\t\tkey='replacementForm'\r\n\t\t\t\t\t\tonSubmit={this.onSubmit.bind(this)}\r\n\t\t\t\t\t\tsubmitText='Generate'\r\n\t\t\t\t\t\tchildren={[\r\n\t\t\t\t\t\t\t{ name: 'url', label: 'Game URL', type: 'text' },\r\n\t\t\t\t\t\t\t{ name: 'departing', label: 'Departing Player', type: 'text' },\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t/>,\r\n\t\t\t\t\t<div key='result' className='modalResult'>\r\n\t\t\t\t\t\t<h3>\r\n\t\t\t\t\t\t\tResult <span>{this.state.progress}</span>\r\n\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t<textarea value={this.state.result} readOnly />\r\n\t\t\t\t\t</div>,\r\n\t\t\t\t]}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n","export function attachSuffixOf(i) {\r\n    let j = i % 10, k = i % 100;\r\n    if (j === 1 && j !== 11) return i + \"st\";\r\n    else if (j === 2 && k !== 12) return i + \"nd\";\r\n    else if (j === 3 && k !== 13) return i + \"rd\";\r\n    else return i + \"th\";\r\n}\r\n","import { findBestMatch } from 'string-similarity';\r\n\r\nexport default class Vote {\r\n    constructor(voteData, category) {\r\n        this.category = category;\r\n        this.author = voteData.author;\r\n        this.pronoun = voteData.pronoun;\r\n        this.number = parseInt(voteData.post.number);\r\n        this.url = voteData.post.url;\r\n        this.votes = voteData.votes;\r\n        this.vote = {\r\n            last: null,\r\n            valid: null\r\n        }\r\n    }\r\n    isAfter(vote) {\r\n        return this.number > vote.number;\r\n    }\r\n    getNewest(vote) {\r\n        if (!vote) {\r\n            return this;\r\n        } else {\r\n            return this.isAfter ? this : vote;\r\n        }\r\n    }\r\n    clean(settings) {\r\n        const totalnames = settings.totalnames, alias = settings.alias, voteArray = this.votes[this.category];\r\n        let lastVote = undefined, finalVote = undefined;\r\n        for (let i = voteArray.length; i >= 0; i -= 1) {\r\n            const originalVote = voteArray[i];\r\n            if (lastVote === undefined) lastVote = originalVote;\r\n            if (finalVote === undefined) {\r\n                if (originalVote || originalVote === null) {\r\n                    if (originalVote === null) {\r\n                        finalVote = null;\r\n                    } else {\r\n                        let correction = findBestMatch(originalVote, totalnames).bestMatch;\r\n                        if (correction.rating >= settings?.correctionWeight || 0.7) {\r\n                            let corrected = alias[correction.target];\r\n                            if (corrected) {\r\n                                finalVote = corrected;\r\n                                if (lastVote === originalVote)\r\n                                    lastVote = finalVote;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.vote.last = lastVote;\r\n        this.vote.valid = finalVote;\r\n    }\r\n    isValid(settings) {\r\n        let isCurrent = this.number > parseInt(settings.days[settings.days.length - 1]);\r\n        let isDead = false;\r\n        for (let deadUsr of settings.dead) {\r\n            let deadRoot = this.rootUser(deadUsr, settings.totalnames);\r\n            let userRoot = this.rootUser(this.author, settings.totalnames);\r\n            if (deadRoot.target === userRoot.target) {\r\n                isDead = true;\r\n            }\r\n        }\r\n        return isCurrent && !isDead;\r\n    }\r\n    rootUser(user, totalnames) {\r\n        return findBestMatch(user, totalnames).bestMatch;\r\n    }\r\n}","export function sortArraysBySize(array) {\r\n    for (let i = 1; i < array.lemgth; i++) {\r\n        for (let j = i - 1; j > -1; j--) {\r\n            let a = array[i].length,\r\n                b = array[j].length;\r\n            if (a < b) [array[j + 1], array[j]] = [array[j], array[j + 1]];\r\n        }\r\n    }\r\n    return array;\r\n}\r\n","const seperator = ',';\r\nconst block = ':';\r\nconst selectors = {\r\n\tplayers: ['playerList', 'players'],\r\n\tslots: ['slotList', 'slots', 'replacementlist', 'replacements'],\r\n\talias: ['nicknameList', 'nicknames', 'alias', 'aliasList'],\r\n\tmoderators: ['moderatorList', 'moderators', 'moderatorNames'],\r\n\tdead: ['deadList', 'dead', 'eliminated'],\r\n\tdays: ['dayStartNumbers', 'dayStart', 'days'],\r\n\tdeadline: ['deadline', 'timer'],\r\n\tprods: ['prodTimer', 'prod'],\r\n\tcountdown: ['prods', 'timer', 'prodTimer', 'countdown'],\r\n\tpageData: ['pageData'],\r\n\tcorrectionWeight: ['correctionWeight, correction'],\r\n\tedash: ['edash', 'edashweight'],\r\n\tedashOnTop: ['edashOnTop'],\r\n};\r\nfunction containsSelector(sel, selRef) {\r\n\treturn selRef.includes(sel);\r\n}\r\nfunction findSelector(sel) {\r\n\tfor (const selector in selectors) {\r\n\t\tif (containsSelector(sel, selectors[selector])) {\r\n\t\t\treturn { handle: selector, request: sel, selectors: selectors[selector] };\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nconst defaultFunc = (settings) => {\r\n\tlet s = new SettingsFormat(settings);\r\n\treturn s.data;\r\n};\r\nexport default defaultFunc;\r\n\r\nclass SettingsFormat {\r\n\tconstructor(settings = null) {\r\n\t\tthis.data = {\r\n\t\t\tplayers: [],\r\n\t\t\tslots: {},\r\n\t\t\talias: {},\r\n\t\t\ttotalnames: [],\r\n\t\t\tmoderators: [],\r\n\t\t\tdead: [],\r\n\t\t\tdays: ['0'],\r\n\t\t\tvotes: {\r\n\t\t\t\treg: {\r\n\t\t\t\t\tid: '0',\r\n\t\t\t\t\tvote: 'VOTE: ',\r\n\t\t\t\t\tunvote: 'UNVOTE: ',\r\n\t\t\t\t},\r\n\t\t\t\thurt: {\r\n\t\t\t\t\tid: '1',\r\n\t\t\t\t\tvote: 'HURT: ',\r\n\t\t\t\t\tunvote: 'HEAL: ',\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tpageData: null,\r\n\t\t\tvoteWeight: {\r\n\t\t\t\treg: 1,\r\n\t\t\t},\r\n\t\t\tedash: -1,\r\n\t\t\tedashOnTop: -1,\r\n\t\t\tcorrectionWeight: 0.5,\r\n\t\t};\r\n\t\tthis.baseUrl = '';\r\n\t\tif (settings) this.parseSettings(settings);\r\n\t}\r\n\tparseSettings(settingsData) {\r\n\t\tfor (const sel in settingsData) {\r\n\t\t\tlet selector = findSelector(sel);\r\n\t\t\tlet data = settingsData[sel];\r\n\t\t\tif (selector) {\r\n\t\t\t\tswitch (selector.handle) {\r\n\t\t\t\t\tcase 'players':\r\n\t\t\t\t\t\tconst playerRef = this.convertCommaDelimiter(data);\r\n\t\t\t\t\t\tthis.data.players = playerRef.list;\r\n\t\t\t\t\t\tthis.data.slots = playerRef.obj;\r\n\t\t\t\t\t\tthis.addNamesArray(playerRef.list);\r\n\t\t\t\t\t\tthis.addAlias(playerRef.obj);\r\n\t\t\t\t\t\tthis.convertPlayerNicknames(playerRef.list);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'slots':\r\n\t\t\t\t\t\tconst slotRef = this.convertCommaDelimiter(data);\r\n\t\t\t\t\t\tthis.data.slots = slotRef.obj;\r\n\t\t\t\t\t\tthis.addNamesArray(slotRef.list);\r\n\t\t\t\t\t\tthis.addAlias(slotRef.obj);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'alias':\r\n\t\t\t\t\t\tconst aliasRef = this.convertCommaDelimiter(data);\r\n\t\t\t\t\t\tthis.addAlias(aliasRef.obj);\r\n\t\t\t\t\t\tthis.addNamesArray(aliasRef.list);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'moderators':\r\n\t\t\t\t\t\tconst moderatorRef = this.convertCommaDelimiter(data);\r\n\t\t\t\t\t\tthis.data.moderators = moderatorRef.list;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'dead':\r\n\t\t\t\t\t\tconst deadRef = this.convertCommaDelimiter(data);\r\n\t\t\t\t\t\tthis.data.dead = deadRef.list;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'days':\r\n\t\t\t\t\t\tconst dayRef = this.convertCommaDelimiter(data);\r\n\t\t\t\t\t\tthis.data.days = dayRef.list;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'deadline':\r\n\t\t\t\t\t\tthis.data.deadline = data;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'countdown':\r\n\t\t\t\t\t\tconst prodRef = this.convertCommaDelimiter(data);\r\n\t\t\t\t\t\tlet prodList = prodRef.list;\r\n\t\t\t\t\t\tthis.data.prods = [];\r\n\t\t\t\t\t\tfor (let i = 0; i < 4; i++) {\r\n\t\t\t\t\t\t\tif (!isNaN(parseInt(prodList[i]))) this.data.prods[i] = prodList[i];\r\n\t\t\t\t\t\t\telse this.data.prods[i] = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'pageData':\r\n\t\t\t\t\t\tthis.data.pageData = data;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'correctionWeight':\r\n\t\t\t\t\t\tthis.data.correctionWeight = data;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'prods':\r\n\t\t\t\t\t\tconst prodTimerRef = this.convertProds(data);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'edash':\r\n\t\t\t\t\t\tconst edashInt = parseInt(data);\r\n\t\t\t\t\t\tif (!isNaN(edashInt)) this.data.edash = edashInt;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'edashOnTop':\r\n\t\t\t\t\t\tconst edashOnTopInt = parseInt(data);\r\n\t\t\t\t\t\tif (!isNaN(edashOnTopInt)) this.data.edashOnTop = edashOnTopInt;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tconsole.log('Unknown Setting');\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(`Settings found [${sel}] as an unknown selector.`);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\taddNamesArray(nameArray) {\r\n\t\tfor (let name of nameArray) {\r\n\t\t\tif (!this.data.totalnames.includes(name)) this.data.totalnames.push(name);\r\n\t\t}\r\n\t}\r\n\taddAlias(obj) {\r\n\t\tthis.data.alias = Object.assign(this.data.alias, obj);\r\n\t}\r\n\taddSetting(handle, setting) {\r\n\t\tswitch (handle) {\r\n\t\t\tcase 'playerList':\r\n\t\t\t\tthis.addPlayers(setting);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\taddPlayers(players) {\r\n\t\tlet slots = players.split(',');\r\n\t\tfor (let i = 0; i < slots.length; i++) {\r\n\t\t\tlet slot = slots[i];\r\n\t\t\tlet players = slot.split(':');\r\n\t\t\tfor (let f = 1; f < players.length; f++) {\r\n\t\t\t\tlet cur = players[f],\r\n\t\t\t\t\troot = players[0];\r\n\t\t\t\tthis.slotList[cur] = root;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tconvertPlayerNicknames(data) {\r\n\t\tconst nicknames = {};\r\n\t\tfor (let i = 0; i < data.length; i++) {\r\n\t\t\tconst root = data[i];\r\n\t\t\tconst splitData = root.split('{');\r\n\t\t\tif (splitData.length > 1) {\r\n\t\t\t\tlet nicks = splitData[1].split('}')[0].split('+');\r\n\t\t\t\tfor (let j = 0; j < nicks.length; j++) {\r\n\t\t\t\t\tnicknames[nicks[j]] = splitData[0];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tconsole.log(nicknames);\r\n\t\treturn nicknames;\r\n\t}\r\n\tconvertCommaDelimiter(data) {\r\n\t\tconst author = [],\r\n\t\t\tgroup = {};\r\n\t\tlet slotRef = data.split(seperator);\r\n\t\tfor (let i = 0; i < slotRef.length; i++) {\r\n\t\t\tlet indivPlayers = slotRef[i].split(block);\r\n\t\t\tfor (let j = 0; j < indivPlayers.length; j++) {\r\n\t\t\t\tconst currentPlayer = indivPlayers[0].trim();\r\n\t\t\t\tconst playerReference = indivPlayers[j].trim();\r\n\t\t\t\tauthor.push(playerReference);\r\n\t\t\t\tgroup[playerReference] = currentPlayer;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn { list: author, obj: group };\r\n\t}\r\n\tconvertProds(data) {\r\n\t\tconst prods = [0, 0, 0, 0];\r\n\t\tconst split = data.split(',');\r\n\t\tconst val = split.length > prods.length ? prods.length : split.length;\r\n\t\tfor (let i = 0; i < val; i++) {\r\n\t\t\tlet prod = split[i].trim();\r\n\t\t\tlet int = parseInt(prod);\r\n\t\t\tif (!isNaN(int)) {\r\n\t\t\t\tprods[i] = int;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport { connectSocket } from '../../network/socket.js';\r\nimport Vote from '../../scripts/Vote.js';\r\nimport { sortArraysBySize } from '../../scripts/sorting.js';\r\nimport { findBestMatch } from 'string-similarity';\r\nimport Form from '../forms/Form.jsx';\r\nimport Modal from './Modal';\r\nimport settings from '../../scripts/formatting/settingsFormatter';\r\n\r\nexport default class VoteCount extends React.Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\tprogress: '',\r\n\t\t\tresult: '',\r\n\t\t};\r\n\t\tthis.toggle = {\r\n\t\t\tonlyCountVotes: false,\r\n\t\t};\r\n\t\tthis.cache = {};\r\n\t\tthis.socket = null;\r\n\r\n\t\tfor (const cat in this.toggle) {\r\n\t\t\tthis.state[cat] = this.toggle[cat];\r\n\t\t}\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\tthis.startSocketConnection();\r\n\t\tthis.setupSocketListeners();\r\n\t}\r\n\tcomponentWillUnmount() {\r\n\t\tthis.closeSocketConnection();\r\n\t}\r\n\tstartSocketConnection() {\r\n\t\tthis.socket = connectSocket();\r\n\t}\r\n\tcloseSocketConnection() {\r\n\t\tthis.socket.disconnect();\r\n\t}\r\n\tsetupSocketListeners() {\r\n\t\tthis.socket.on('result', this.processVotes.bind(this));\r\n\t\tthis.socket.on('progress', this.processProgress.bind(this));\r\n\t\tthis.socket.on('error', this.processError.bind(this));\r\n\t}\r\n\tprocessVotes(data) {\r\n\t\tdata.settings = settings(data.settings);\r\n\t\tthis.cache = Object.assign(this.cache, data);\r\n\t\tconst cleaned = this.clean();\r\n\t\tif (cleaned) {\r\n\t\t\tconst format = this.format(cleaned);\r\n\t\t\tthis.setState({ progress: '', result: format });\r\n\t\t} else {\r\n\t\t\tthis.setState({ progress: '[ERROR]', result: 'Thread is not compatible with this tool.' });\r\n\t\t}\r\n\t}\r\n\tprocessProgress(data) {\r\n\t\tconst { currentPage, lastPage, notes } = data;\r\n\t\tif (currentPage && lastPage) {\r\n\t\t\tthis.setState({ progress: `[${Math.round((data.currentPage / data.lastPage) * 100)}%]` });\r\n\t\t}\r\n\t\tif (notes) {\r\n\t\t\tthis.setState({ result: `${notes}` });\r\n\t\t}\r\n\t}\r\n\tprocessError(data) {\r\n\t\tthis.setState({ progress: '[ERROR]', result: data.type });\r\n\t}\r\n\tonFormSubmit(e) {\r\n\t\te.preventDefault();\r\n\t\tlet gameUrl = e.target.url.value;\r\n\t\tthis.socket.emit('votecount', { url: gameUrl });\r\n\t\tthis.setState({ progress: '[0%]', result: 'Pending Result...' });\r\n\t}\r\n\tonAddField(fields) {\r\n\t\tconsole.log(fields);\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Modal\r\n\t\t\t\ttitle='Vote Counter'\r\n\t\t\t\tchildren={[\r\n\t\t\t\t\t<Form\r\n\t\t\t\t\t\tkey='votecountForm'\r\n\t\t\t\t\t\tonSubmit={this.onFormSubmit.bind(this)}\r\n\t\t\t\t\t\tsubmitText='Generate Vote Count'\r\n\t\t\t\t\t\tchildren={[\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tname: 'url',\r\n\t\t\t\t\t\t\t\tlabel: 'Game URL',\r\n\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t/>,\r\n\r\n\t\t\t\t\t<div key='result' className='modalResult'>\r\n\t\t\t\t\t\t<h3>\r\n\t\t\t\t\t\t\tResult <span>{this.state.progress}</span>\r\n\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t<textarea value={this.state.result} readOnly />\r\n\t\t\t\t\t</div>,\r\n\t\t\t\t]}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\tclean() {\r\n\t\tconst isValid = this.cache.settings.players.length >= 1;\r\n\t\tconst voteData = {\r\n\t\t\tvotes: {},\r\n\t\t\twagons: {},\r\n\t\t\torderedWagons: [],\r\n\t\t\tnotVoting: [],\r\n\t\t\tmajority: null,\r\n\t\t};\r\n\t\tif (isValid) {\r\n\t\t\tfor (const category in this.cache.voteCount) {\r\n\t\t\t\tif (!voteData.votes[category]) voteData.votes[category] = {};\r\n\t\t\t\tif (!voteData.wagons[category]) voteData.wagons[category] = {};\r\n\t\t\t\tlet hammerOccured = false;\r\n\t\t\t\tvoteData.notVoting = this.getAlive();\r\n\t\t\t\tvoteData.majority = Math.ceil(voteData.notVoting.length / 2);\r\n\t\t\t\tfor (const author in this.cache.voteCount[category]) {\r\n\t\t\t\t\tif (!hammerOccured) {\r\n\t\t\t\t\t\tlet voteArray = this.cache.voteCount[category][author];\r\n\t\t\t\t\t\tlet lastVote = null;\r\n\t\t\t\t\t\tlet validVote = null;\r\n\t\t\t\t\t\tfor (let i = 0; i < voteArray.length; i++) {\r\n\t\t\t\t\t\t\tlet vote = new Vote(voteArray[i], category);\r\n\t\t\t\t\t\t\tvote.clean(this.cache.settings);\r\n\t\t\t\t\t\t\tif (vote.vote.valid !== undefined) {\r\n\t\t\t\t\t\t\t\tif (vote.vote.valid) {\r\n\t\t\t\t\t\t\t\t\tvalidVote = vote.getNewest(validVote);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tvalidVote = null;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlastVote = vote.getNewest(lastVote);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tlet valid = validVote?.isValid(this.cache.settings);\r\n\t\t\t\t\t\tif (valid && !hammerOccured) {\r\n\t\t\t\t\t\t\tlet authorIndex = voteData.notVoting.indexOf(validVote.author);\r\n\t\t\t\t\t\t\tvoteData.notVoting.splice(authorIndex, 1);\r\n\t\t\t\t\t\t\tvoteData.votes[category][author] = {\r\n\t\t\t\t\t\t\t\tlast: lastVote,\r\n\t\t\t\t\t\t\t\tvalid: validVote,\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tif (!voteData.wagons[category][validVote.vote.valid]) voteData.wagons[category][validVote.vote.valid] = [];\r\n\r\n\t\t\t\t\t\t\tlet wagons = voteData.wagons[category][validVote.vote.valid];\r\n\t\t\t\t\t\t\twagons.push(validVote);\r\n\t\t\t\t\t\t\twagons = sortArraysBySize(wagons);\r\n\t\t\t\t\t\t\tvoteData.wagons[category][validVote.vote.valid] = wagons;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (const wagonHandle in voteData.wagons[category]) {\r\n\t\t\t\t\tlet wagon = this.sortWagonByPostNumber(voteData.wagons[category][wagonHandle]);\r\n\t\t\t\t\tif (!voteData.orderedWagons[category]) voteData.orderedWagons[category] = [];\r\n\t\t\t\t\tif (!voteData.orderedWagons[category][wagon.length]) voteData.orderedWagons[category][wagon.length] = {};\r\n\t\t\t\t\tvoteData.orderedWagons[category][wagon.length][wagonHandle] = wagon;\r\n\t\t\t\t}\r\n\t\t\t\tvoteData.orderedWagons[category].reverse();\r\n\t\t\t\tconsole.log(voteData.orderedWagons);\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet returnVal = this.cache.settings.players.length;\r\n\t\treturn returnVal >= 1 ? voteData : null;\r\n\t}\r\n\tsortWagonByPostNumber(wagon) {\r\n\t\tlet newArray = wagon;\r\n\t\tlet length = newArray.length;\r\n\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\tfor (let j = 0; j < length - i - 1; j++) {\r\n\t\t\t\tif (newArray[j].number > newArray[j + 1].number) {\r\n\t\t\t\t\tlet tmp = newArray[j];\r\n\t\t\t\t\tnewArray[j] = newArray[j + 1];\r\n\t\t\t\t\tnewArray[j + 1] = tmp;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tconsole.log(newArray);\r\n\t\treturn newArray;\r\n\t}\r\n\tformat(voteData) {\r\n\t\tconst { wagons, notVoting, orderedWagons, majority } = voteData;\r\n\t\tconst { edash, edashOnTop } = this.cache.settings;\r\n\t\tlet totalVC = '';\r\n\r\n\t\tfor (const category in wagons) {\r\n\t\t\tlet categoryVotes = '[area=VC]';\r\n\r\n\t\t\tconst wagonArray = orderedWagons[category];\r\n\t\t\tfor (let i = 0; i < wagonArray.length; i++) {\r\n\t\t\t\tfor (const wagonHead in wagonArray[i]) {\r\n\t\t\t\t\tlet vote = wagonArray[i][wagonHead];\r\n\t\t\t\t\tlet voteStr = `[b]${wagonHead}[/b] (${vote.length}) -> `;\r\n\t\t\t\t\tfor (let i = 0; i < vote.length; i++) {\r\n\t\t\t\t\t\tif (i > 0) voteStr += ', ';\r\n\t\t\t\t\t\tvoteStr += `${vote[i].author}`;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet eDash = majority - vote.length;\r\n\t\t\t\t\tconst showEdash = i <= edashOnTop - 1 || eDash <= edash;\r\n\t\t\t\t\tif (showEdash) voteStr += eDash <= 0 ? ' [ELIMINATED]' : ` [E-${eDash}]`;\r\n\t\t\t\t\tcategoryVotes += `${voteStr}\\n`;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (notVoting.length > 0) {\r\n\t\t\t\tcategoryVotes += `\\n[b]Not Voting[/b] (${notVoting.length}) -> `;\r\n\t\t\t\tfor (let i = 0; i < notVoting.length; i++) {\r\n\t\t\t\t\tif (i > 0) categoryVotes += ', ';\r\n\t\t\t\t\tcategoryVotes += `${notVoting[i]}`;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcategoryVotes += `${this.cache.settings.deadline ? `\\nDay ends in [countdown]${this.cache.settings.deadline}[/countdown]` : ''}[/area]`;\r\n\t\t\ttotalVC += categoryVotes;\r\n\t\t}\r\n\t\treturn totalVC;\r\n\t}\r\n\tgetAlive() {\r\n\t\tconst { players, dead } = this.cache.settings;\r\n\t\tlet aliveList = [];\r\n\t\tfor (let i = 0; i < players.length; i++) {\r\n\t\t\tlet root = this.getRootAuthor(players[i]);\r\n\t\t\tif (!containsObject(root, aliveList) && !containsObject(root, dead)) {\r\n\t\t\t\taliveList.push(root);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn aliveList;\r\n\t}\r\n\tcheckValid(votePost, category) {\r\n\t\tlet isCurrent = votePost.number > parseInt(this.cache.settings.days[this.cache.settings.days.length - 1]);\r\n\t\tlet isDead = false;\r\n\t\tfor (let deadUsr of this.cache.settings.dead) {\r\n\t\t\tlet deadRoot = this.rootUser(deadUsr);\r\n\t\t\tlet userRoot = this.rootUser(votePost.author);\r\n\t\t\tif (deadRoot.target === userRoot.target) {\r\n\t\t\t\tisDead = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn isCurrent && !isDead;\r\n\t}\r\n\tisValidVote(vote) {\r\n\t\tlet valid = false;\r\n\t\tif (vote) {\r\n\t\t\tlet cor = this.rootUser(vote);\r\n\t\t\tif (cor.rating >= this.cache.settings.correctionWeight || 0.7) {\r\n\t\t\t\tlet correctedVote = this.cache.settings.alias[cor.target];\r\n\t\t\t\tif (correctedVote) {\r\n\t\t\t\t\tvalid = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn valid;\r\n\t}\r\n\trootUser(user) {\r\n\t\treturn findBestMatch(user, this.cache.settings.totalnames).bestMatch;\r\n\t}\r\n\tgetRootAuthor(author) {\r\n\t\tlet bestMatch = findBestMatch(author, this.cache.settings.totalnames).bestMatch;\r\n\t\tlet root = this.cache.settings.alias[bestMatch.target];\r\n\t\treturn root || bestMatch.target;\r\n\t}\r\n}\r\n\r\nfunction containsObject(obj, list) {\r\n\tfor (let i = 0; i < list.length; i++) {\r\n\t\tif (list[i] === obj) return true;\r\n\t}\r\n\treturn false;\r\n}\r\n","import io from 'socket.io-client';\r\n\r\nexport function connectSocket() {\r\n    return io.connect();\r\n}\r\n","import React from 'react';\r\n\r\nfunction RolecardComponent(props) {\r\n\tconst { child } = props;\r\n\treturn <div className={'component'}>{child}</div>;\r\n}\r\n\r\nexport default RolecardComponent;\r\n","import React from 'react';\r\n\r\nfunction SidebarButton(props) {\r\n\tconst { name, onclick } = props;\r\n\treturn (\r\n\t\t<div className='sidebarButton' onClick={onclick}>\r\n\t\t\t{name}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default SidebarButton;\r\n","const config = {\r\n\ttemplate: '[quote][b][size=200][color={{rcolour}}]{{align}} {{rname}}[/color][/size][/b]\\n\\n{{abilities}}\\n\\n{{wincon}}[/quote]',\r\n};\r\n\r\nexport default config;\r\n","import React from 'react';\r\nimport Form from '../../forms/Form.jsx';\r\nimport Field from '../../forms/Field';\r\nimport Input from '../../forms/Input';\r\n\r\nexport default class Import extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.formSubmit = props?.formSubmit;\r\n\t}\r\n\trender() {\r\n\t\treturn <Form onSubmit={this.formSubmit.bind(this)} submitText='Import' children={[<Field key='file' child={<Input name='file' label='Upload CSV' type='file' />} />]} />;\r\n\t}\r\n}\r\n","import React from 'react';\r\n\r\nexport default class Template extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.onChange = props.onChange;\r\n\t\tthis.template = props.template || '';\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className='component modalForm'>\r\n\t\t\t\t<form onSubmit={(e) => e.preventDefault()}>\r\n\t\t\t\t\t<label htmlFor='template'>Role Template</label>\r\n\t\t\t\t\t<textarea name='template' onChange={this.onChange}>\r\n\t\t\t\t\t\t{this.template}\r\n\t\t\t\t\t</textarea>\r\n\t\t\t\t\t<input type='submit' value='Process Role Cards' />\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n","import React, { Component } from 'react';\r\nimport RolecardComponent from '../rolecard/RolecardComponent.jsx';\r\nimport SidebarButton from '../rolecard/SidebarButton.jsx';\r\nimport Papa from 'papaparse';\r\nimport { createSocket } from '../../scripts/websockets';\r\n\r\nimport roleCardConfig from '../../config/roleCardConfig';\r\n\r\nimport Import from '../rolecard/sections/Import.jsx';\r\nimport Template from '../rolecard/sections/Template.jsx';\r\n\r\nexport default class RoleCard extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\tshowImport: false,\r\n\t\t\tshowGlobals: false,\r\n\t\t\tshowTemplate: false,\r\n\t\t\troleData: [],\r\n\t\t};\r\n\t\tthis.socket = createSocket();\r\n\t}\r\n\ttoggleImport() {\r\n\t\tthis.setState({ import: !this.state.showImport });\r\n\t}\r\n\ttoggleGlobal() {\r\n\t\tthis.setState({ globals: !this.state.showGlobals });\r\n\t}\r\n\ttoggleTemplate() {\r\n\t\tthis.setState({ template: !this.state.showTemplate });\r\n\t}\r\n\tsubmitImport(e) {\r\n\t\te.preventDefault();\r\n\t\ttry {\r\n\t\t\tlet file = e.target.file.files[0];\r\n\t\t\tPapa.parse(file, {\r\n\t\t\t\tdownload: true,\r\n\t\t\t\theader: true,\r\n\t\t\t\tskipEmptyLines: true,\r\n\t\t\t\tcomplete: (res) => {\r\n\t\t\t\t\tlet roles = [];\r\n\t\t\t\t\tfor (const data of res.data) roles.push(data);\r\n\t\t\t\t\tthis.setState({ roleData: this.state.roleData });\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log('Invalid File');\r\n\t\t}\r\n\t}\r\n\ttemplateChange(e) {\r\n\t\tthis.setState({ template: e.target.value });\r\n\t}\r\n\trender() {\r\n\t\t/* Split later into different components */\r\n\t\treturn (\r\n\t\t\t<div className='rolecard'>\r\n\t\t\t\t<div className='sidebar'>\r\n\t\t\t\t\t<SidebarButton name='Import' onclick={this.toggleImport.bind(this)} />\r\n\t\t\t\t\t<SidebarButton name='Globals' onclick={this.toggleGlobal.bind(this)} />\r\n\t\t\t\t\t<SidebarButton name='Process' onclick={this.toggleTemplate.bind(this)} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='content'>\r\n\t\t\t\t\t{this.state.showImport && <RolecardComponent child={<Import formSubmit={this.submitImport.bind(this)} />} />}\r\n\t\t\t\t\t{this.state.showGlobals && <RolecardComponent child={<span>Global Component</span>} />}\r\n\t\t\t\t\t{this.state.showTemplate && <RolecardComponent child={<Template onChange={this.templateChange.bind(this)} template={roleCardConfig.template} />} />}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport Modal from './Modal';\r\nexport default class Replacement extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Modal\r\n\t\t\t\ttitle='Credits and Attributions'\r\n\t\t\t\tchildren={[\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\tUicons by <a href='https://www.flaticon.com/uicons'>Flaticon</a>\r\n\t\t\t\t\t</span>,\r\n\t\t\t\t]}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter as Router, Route, Switch, Redirect } from 'react-router-dom';\r\nimport './css/main.css';\r\n\r\n// Pages\r\nimport Main from './components/pages/Main.jsx';\r\nimport NotFoundPage from './components/pages/404.jsx';\r\nimport Replacement from './components/pages/Replacement.jsx';\r\nimport VoteCount from './components/pages/VoteCount.jsx';\r\nimport RoleCard from './components/pages/RoleCard.jsx';\r\nimport Credit from './components/pages/Credits.jsx';\r\nclass Doc extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<Router>\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Route exact path='/' component={Main} />\r\n\t\t\t\t\t\t<Route exact path='/replacement' component={Replacement} />\r\n\t\t\t\t\t\t<Route exact path='/votecount' component={VoteCount} />\r\n\t\t\t\t\t\t<Route exact path='/rolecard' component={RoleCard} />\r\n\t\t\t\t\t\t<Route exact path='/credits' component={Credit} />\r\n\t\t\t\t\t\t<Route exact path='/test' component={VoteCount} />\r\n\r\n\t\t\t\t\t\t<Route path='/404' component={NotFoundPage} />\r\n\t\t\t\t\t\t<Redirect to='/404' />\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</Router>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n}\r\nReactDOM.render(<Doc />, document.getElementById('root'));\r\n"],"sourceRoot":""}